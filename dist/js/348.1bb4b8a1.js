"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[348],{60239:(e,l,t)=>{t.d(l,{Z:()=>x});var a=t(59835),o=t(86970),s=t(60499),n=t(66663),i=t(39012),c=t(22003),r=function(e,l,t,a){function o(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,s){function n(e){try{c(a.next(e))}catch(l){s(l)}}function i(e){try{c(a["throw"](e))}catch(l){s(l)}}function c(e){e.done?t(e.value):o(e.value).then(n,i)}c((a=a.apply(e,l||[])).next())}))};const d=(0,a._)("div",{class:"text-h5 self-start"},"进程日志",-1),u={key:0},v=["innerHTML"],m={key:0,class:"timestamp"},p={key:1,class:"level"},f=["innerHTML"],_=(0,a.aZ)({__name:"LogsConsole",props:{logs:{},connected:{type:Boolean},height:{}},emits:["reconnect"],setup(e,{emit:l}){const t="当前版本:",_={[c.dJ.Debug]:"level-debug",[c.dJ.Info]:"level-info",[c.dJ.Warning]:"level-warn",[c.dJ.Error]:"level-error",[c.dJ.Fatal]:"level-fatal",[c.dJ.Stdout]:"stdout"},w=new i.Y;w.use_classes=!0;const y=l,g=e,h=(0,s.iH)(),k=(0,s.iH)();return(0,a.YP)((()=>g.logs.length),(()=>r(this,void 0,void 0,(function*(){if(!k.value)return;const e=k.value.getScrollTarget(),{scrollTop:l,clientHeight:t,scrollHeight:o}=e;Math.abs(l+t-o)<=1&&(yield(0,a.Y3)(),e.scrollTop=o)})))),(e,l)=>{const i=(0,a.up)("q-space"),r=(0,a.up)("q-chip"),g=(0,a.up)("q-btn"),W=(0,a.up)("q-card-section"),b=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(b,null,{default:(0,a.w5)((()=>{var b;return[(0,a.Wm)(W,{class:"row q-gutter-x-md items-center justify-start"},{default:(0,a.w5)((()=>[d,(0,a.Wm)(i),"boolean"===typeof e.connected?((0,a.wg)(),(0,a.j4)(r,{key:0,onClick:l[0]||(l[0]=e=>y("reconnect",e)),clickable:!e.connected,color:e.connected?"positive":"negative",icon:e.connected?"link":"link_off"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 状态: "+(0,o.zw)(e.connected?"实时":"断开"),1)])),_:1},8,["clickable","color","icon"])):(0,a.kq)("",!0),(0,a.Wm)(g,{onClick:l[1]||(l[1]=e=>{var l;return null===(l=k.value)||void 0===l?void 0:l.setScrollPercentage("vertical",1,300)}),flat:"",rounded:"",icon:"move_down",label:"跳转底部"}),(0,a.WI)(e.$slots,"top-trailing")])),_:3}),(0,a.WI)(e.$slots,"top"),(0,a.Wm)((0,s.SU)(n.Z),{ref_key:"scroll",ref:k,class:"page-logs",style:(0,o.j5)({height:null!==(b=e.height)&&void 0!==b?b:"calc(100vh - 10rem)"})},{default:(0,a.w5)((()=>[(0,a._)("div",{ref_key:"root",ref:h,class:"logs ansi-up-theme"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.logs,((e,l)=>{var n;return(0,a.wg)(),(0,a.iD)("div",{class:"line",key:l},["string"===typeof e?((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("code",{innerHTML:(0,s.SU)(w).ansi_to_html(e)},null,8,v)])):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,o.C_)({start:e.message.startsWith(t)})},[e.time?((0,a.wg)(),(0,a.iD)("code",m,(0,o.zw)(new Date(e.time).toLocaleString()),1)):(0,a.kq)("",!0),e.level?((0,a.wg)(),(0,a.iD)("code",p,(0,o.zw)(e.level),1)):(0,a.kq)("",!0),(0,a._)("code",{innerHTML:(0,s.SU)(w).ansi_to_html(e.message),class:(0,o.C_)(_[null!==(n=e.level)&&void 0!==n?n:(0,s.SU)(c.dJ).Stdout])},null,10,f)],2))])})),128))],512)])),_:1},8,["style"])]})),_:3})}}});var w=t(44458),y=t(63190),g=t(90136),h=t(57691),k=t(68879),W=t(69984),b=t.n(W);const q=_,x=q;b()(_,"components",{QCard:w.Z,QCardSection:y.Z,QSpace:g.Z,QChip:h.Z,QBtn:k.Z,QScrollArea:n.Z})},26348:(e,l,t)=>{t.r(l),t.d(l,{default:()=>ee});var a=t(59835),o=t(60499),s=t(86970),n=t(34136),i=t(19302),c=t(27092),r=t.n(c),d=t(60239),u=function(e,l,t,a){function o(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,s){function n(e){try{c(a.next(e))}catch(l){s(l)}}function i(e){try{c(a["throw"](e))}catch(l){s(l)}}function c(e){e.done?t(e.value):o(e.value).then(n,i)}c((a=a.apply(e,l||[])).next())}))};const v=e=>((0,a.dD)("data-v-b9abaffc"),e=e(),(0,a.Cn)(),e),m={class:"q-pa-sm col-12 col-lg-4 col-md-6 q-gutter-y-sm items-baseline justify-evenly"},p=v((()=>(0,a._)("div",{class:"text-h5"},"CPU占用",-1))),f={class:"text-body1 q-py-sm"},_={class:"digit-display q-mx-sm"},w={class:"text-body1 q-py-sm"},y={class:"digit-display q-mx-sm"},g=v((()=>(0,a._)("div",{class:"text-h5"},"内存占用",-1))),h={class:"text-body1"},k={class:"digit-display q-mx-sm"},W={class:"row text-body1"},b={class:"q-mr-sm q-my-sm"},q={class:"digit-display"},x={class:"q-my-sm"},U={class:"digit-display"},S={class:"text-body1 q-py-sm"},z={class:"digit-display q-mx-sm"},Z=v((()=>(0,a._)("div",{class:"text-h5"},"系统信息",-1))),C={class:"col-12"},P=v((()=>(0,a._)("div",{class:"text-body1"},"硬盘占用",-1))),Q={class:"absolute-full flex flex-center"},B={class:"text-body2 text-grey q-pt-sm"},H=v((()=>(0,a._)("div",{class:"text-body1 q-pb-sm"},"开机时间",-1))),D={class:"text-body2"},L=v((()=>(0,a._)("div",{class:"text-body1 q-pb-sm"},"主进程启动时间",-1))),T={class:"text-body2"},j=v((()=>(0,a._)("div",{class:"text-h5"},"资源统计",-1))),M=(0,a.aZ)({__name:"IndexView",setup(e){const l=(0,i.Z)(),t=(0,o.iH)(),c=(0,o.iH)(2e3),v=(0,o.iH)([]),M=(0,o.iH)(),A={cpuUsed:"总计CPU占用",cpuProcess:"主进程CPU占用",memoryUsed:"总计内存占用",memoryProcess:"主进程内存占用"},J={dataLabels:{enabled:!1},xaxis:{type:"datetime",range:9e4},yaxis:{max:100,min:0,decimalsInFloat:1},stroke:{curve:"smooth"}},I=Object.values(A).map((e=>({name:e,data:[]}))),Y=(0,o.iH)();function V(e,l=2){if(0===e)return"0 Bytes";const t=1024,a=l<0?0:l,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return(e/Math.pow(t,s)).toFixed(a)+o[s]}let F;function G(){var e;return u(this,void 0,void 0,(function*(){try{l.loadingBar.start();const{data:a}=yield n.api.systemStatusApiStatusGet();t.value=a;const o=Date.now();null===(e=Y.value)||void 0===e||e.appendData(Object.entries({[A.cpuUsed]:a.cpu_percent,[A.cpuProcess]:a.process.cpu_percent,[A.memoryUsed]:a.memory.percent,[A.memoryProcess]:a.process.memory_used/a.memory.total*100}).map((([e,l])=>({name:e,data:[{x:o,y:l}]}))))}finally{l.loadingBar.stop(),F=window.setTimeout((()=>{G()}),c.value)}}))}function O(){var e;return u(this,void 0,void 0,(function*(){const{data:l}=yield n.api.systemLogsHistoryApiLogsGet();v.value=l,null===(e=M.value)||void 0===e||e.close();const t=new URL("api/logs",location.href);t.protocol="https:"===t.protocol?"wss:":"ws:",M.value=new WebSocket(t.href),M.value.onmessage=({data:e})=>v.value.push(e),M.value.onclose=()=>M.value=void 0}))}return(0,a.bv)((()=>{G(),O()})),(0,a.Jd)((()=>{var e;window.clearTimeout(F),null===(e=M.value)||void 0===e||e.close()})),(0,a.YP)((()=>l.dark.isActive),(()=>{var e;null===(e=Y.value)||void 0===e||e.updateOptions({theme:{mode:l.dark.isActive?"dark":"light"}})}),{immediate:!0}),(e,n)=>{const i=(0,a.up)("q-card-section"),u=(0,a.up)("q-icon"),A=(0,a.up)("q-circular-progress"),F=(0,a.up)("q-separator"),G=(0,a.up)("q-card"),E=(0,a.up)("q-badge"),K=(0,a.up)("q-linear-progress"),R=(0,a.up)("q-chip"),$=(0,a.up)("q-slider"),N=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(N,{class:"row items-stretch justify-start q-ma-md"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(G,{class:"col-12 col-lg-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"card-title"},{default:(0,a.w5)((()=>[p])),_:1}),(0,a.Wm)(i,{horizontal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>{var e;return[(0,a.Wm)(A,{value:null===(e=t.value)||void 0===e?void 0:e.cpu_percent,"track-color":(0,o.SU)(l).dark.isActive?"grey-8":"grey-3",thickness:.2,size:"16vh","show-value":"",color:"green",class:"q-ma-sm"},{default:(0,a.w5)((()=>{var e;return[(0,a.Wm)(A,{value:null===(e=t.value)||void 0===e?void 0:e.process.cpu_percent,"track-color":(0,o.SU)(l).dark.isActive?"grey-9":"grey-4","show-value":"",size:"15vh",color:"purple"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"developer_board",size:"md",color:"teal"})])),_:1},8,["value","track-color"])]})),_:1},8,["value","track-color"])]})),_:1}),(0,a.Wm)(F,{vertical:""}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>{var e,l;return[(0,a._)("div",f,[(0,a.Uk)(" 总计 "),(0,a._)("span",_,(0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.cpu_percent.toPrecision(3))+"% ",1)]),(0,a.Wm)(F,{spaced:""}),(0,a._)("div",w,[(0,a.Uk)(" 主进程 "),(0,a._)("span",y,(0,s.zw)(null===(l=t.value)||void 0===l?void 0:l.process.cpu_percent.toPrecision(3))+"% ",1)])]})),_:1})])),_:1})])),_:1}),(0,a.Wm)(G,{class:"col-12 col-lg-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"card-title"},{default:(0,a.w5)((()=>[g])),_:1}),(0,a.Wm)(i,{horizontal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>{var e;return[(0,a.Wm)(A,{value:null===(e=t.value)||void 0===e?void 0:e.memory.percent,"track-color":(0,o.SU)(l).dark.isActive?"grey-8":"grey-3",thickness:.2,size:"16vh","show-value":"",color:"blue",class:"q-ma-sm"},{default:(0,a.w5)((()=>{var e,s,n,i;return[(0,a.Wm)(A,{value:(null!==(s=null===(e=t.value)||void 0===e?void 0:e.process.memory_used)&&void 0!==s?s:0)/(null!==(i=null===(n=t.value)||void 0===n?void 0:n.memory.total)&&void 0!==i?i:0)*100,"track-color":(0,o.SU)(l).dark.isActive?"grey-9":"grey-4","show-value":"",size:"15vh",color:"purple"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"memory",size:"md",color:"light-green"})])),_:1},8,["value","track-color"])]})),_:1},8,["value","track-color"])]})),_:1}),(0,a.Wm)(F,{vertical:""}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>{var e,l,o,n,i,c,r;return[(0,a._)("div",h,[(0,a.Uk)(" 内存 "),(0,a._)("span",k,(0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.memory.percent)+"%",1)]),(0,a.Wm)(F,{spaced:""}),(0,a._)("div",W,[(0,a._)("div",b,[(0,a.Uk)(" 剩余 "),(0,a._)("span",q,(0,s.zw)(V(null!==(o=null===(l=t.value)||void 0===l?void 0:l.memory.available)&&void 0!==o?o:0)),1)]),(0,a._)("div",x,[(0,a.Uk)(" 总计 "),(0,a._)("span",U,(0,s.zw)(V(null!==(i=null===(n=t.value)||void 0===n?void 0:n.memory.total)&&void 0!==i?i:0)),1)])]),(0,a.Wm)(F,{spaced:""}),(0,a._)("div",S,[(0,a.Uk)(" 主进程 "),(0,a._)("span",z,(0,s.zw)(V(null!==(r=null===(c=t.value)||void 0===c?void 0:c.process.memory_used)&&void 0!==r?r:0)),1)])]})),_:1})])),_:1})])),_:1}),(0,a.Wm)(G,{class:"col-12 col-md-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"card-title"},{default:(0,a.w5)((()=>[Z])),_:1}),(0,a.Wm)(i,{class:"row justify-evenly"},{default:(0,a.w5)((()=>{var e,l,o,n,i,c,r,d,u,v;return[(0,a._)("div",C,[P,(0,a.Wm)(K,{value:(null!==(l=null===(e=t.value)||void 0===e?void 0:e.disk.percent)&&void 0!==l?l:0)/100,stripe:"",rounded:"",size:"20px",color:"orange",class:"q-mt-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",Q,[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>{var e;return[(0,a.Uk)((0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.disk.percent)+"%",1)]})),_:1})])])),_:1},8,["value"]),(0,a._)("div",B,(0,s.zw)(V(null!==(n=null===(o=t.value)||void 0===o?void 0:o.disk.free)&&void 0!==n?n:0))+"/ "+(0,s.zw)(V(null!==(c=null===(i=t.value)||void 0===i?void 0:i.disk.total)&&void 0!==c?c:0)),1),(0,a.Wm)(F,{spaced:""}),H,(0,a._)("div",D,(0,s.zw)(new Date(1e3*(null!==(d=null===(r=t.value)||void 0===r?void 0:r.boot_time)&&void 0!==d?d:0)).toLocaleString()),1),(0,a.Wm)(F,{spaced:""}),L,(0,a._)("div",T,(0,s.zw)(new Date(1e3*(null!==(v=null===(u=t.value)||void 0===u?void 0:u.process.start_time)&&void 0!==v?v:0)).toLocaleString()),1)])]})),_:1})])),_:1}),(0,a.Wm)(G,{class:"col-12 col-md-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"card-title"},{default:(0,a.w5)((()=>[j])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(r()),{type:"area",ref_key:"chart",ref:Y,height:"250",options:J,series:(0,o.SU)(I)},null,8,["series"])])),_:1}),(0,a.Wm)(i,{class:"row justify-end items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{icon:"refresh"},{default:(0,a.w5)((()=>[(0,a.Uk)("数据更新间隔")])),_:1}),(0,a.Wm)($,{class:"col-8 col-sm-4",modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value=e),snap:"",min:500,max:1e4,step:100},null,8,["modelValue"]),(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(c.value)+"ms",1)])),_:1})])),_:1})])),_:1})]),(0,a.Wm)(d.Z,{class:"col-12 col-lg-8 col-md-6",onReconnect:O,logs:v.value,connected:!!M.value,height:"100%"},null,8,["logs","connected"])])),_:1})}}});var A=t(11639),J=t(69885),I=t(44458),Y=t(63190),V=t(83302),F=t(22857),G=t(50926),O=t(8289),E=t(20990),K=t(57691),R=t(28423),$=t(69984),N=t.n($);const X=(0,A.Z)(M,[["__scopeId","data-v-b9abaffc"]]),ee=X;N()(M,"components",{QPage:J.Z,QCard:I.Z,QCardSection:Y.Z,QCircularProgress:V.Z,QIcon:F.Z,QSeparator:G.Z,QLinearProgress:O.Z,QBadge:E.Z,QChip:K.Z,QSlider:R.Z})}}]);