"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[991],{96991:(a,e,n)=>{n.r(e),n.d(e,{default:()=>W});var t=n(59835),o=n(60499),l=n(19302),i=n(34136),c=n(43011),u=n(96297),s=n(4465);const r=(0,t._)("div",{class:"text-h5"},"编辑配置文件",-1),d={__name:"AccountConfigEditorView",props:{uin:Number},setup(a){const e=(0,l.Z)(),n=a,d=(0,o.iH)(""),f=(0,o.iH)(""),p=(0,o.iH)(!0),v={extensions:[c.Xy,u.tk.lineWrapping]};async function g(){try{p.value=!0;const{data:a}=await i.api.accountConfigReadApiUinConfigGet(n.uin);d.value=a.content,f.value=a.content}catch{d.value=void 0,f.value=void 0,e.notify({message:"配置文件加载失败",color:"negative"})}finally{p.value=!1}}async function m(){if(f.value)try{p.value=!0;const{data:a}=await i.api.accountConfigWriteApiUinConfigPatch(n.uin,{content:f.value});d.value=a.content,f.value=a.content,e.notify({message:"配置文件修改成功",color:"positive"})}catch(a){e.notify({message:"配置文件修改失败",color:"negative"})}finally{p.value=!1}}async function y(){try{p.value=!0,await i.api.accountConfigDeleteApiUinConfigDelete(n.uin),await g(),e.notify({message:"配置文件删除成功",color:"positive"})}catch{e.notify({message:"配置文件删除失败",color:"negative"})}finally{p.value=!1}}return(0,t.bv)(g),(a,e)=>{const n=(0,t.up)("q-btn"),l=(0,t.up)("q-card-section"),i=(0,t.up)("q-separator"),c=(0,t.up)("q-card-actions"),u=(0,t.up)("q-inner-loading"),d=(0,t.up)("q-card"),w=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(w,{class:"row q-pa-md justify-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"shadow col-12",style:{height:"calc(100vh - 5rem)"}},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{class:"row justify-start items-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{onClick:a.$router.back,flat:"",label:"返回",color:"grey",icon:"arrow_back"},null,8,["onClick"]),r])),_:1}),(0,t.Wm)(i),(0,t.Wm)(c,{class:"q-gutter-md q-mx-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{flat:"",onClick:m,color:"primary",label:"提交修改",icon:"save"}),(0,t.Wm)(n,{flat:"",onClick:g,color:"secondary",label:"重新加载配置文件",icon:"refresh"}),(0,t.Wm)(n,{flat:"",onClick:y,color:"negative",label:"删除并重新生成配置文件",icon:"delete"})])),_:1}),(0,t.Wm)(l,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,o.SU)(s.ZP),{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),options:v},null,8,["modelValue"]),(0,t.Wm)(u,{showing:p.value},null,8,["showing"])])),_:1})])),_:1})])),_:1})}}};var f=n(69885),p=n(44458),v=n(63190),g=n(68879),m=n(50926),y=n(11821),w=n(60854),h=n(69984),C=n.n(h);const b=d,W=b;C()(d,"components",{QPage:f.Z,QCard:p.Z,QCardSection:v.Z,QBtn:g.Z,QSeparator:m.Z,QCardActions:y.Z,QInnerLoading:w.Z})}}]);