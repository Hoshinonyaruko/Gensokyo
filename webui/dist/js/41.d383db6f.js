"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[41],{73632:(e,t,i)=>{var n=i(48077),o=i(97791),s=i(2548),r=i(21921),a=i(85398),l=i(55191),d=i(98642),c=i(70959),u=i(71400),h=i(55455),g=i(95896),p=i(81086),m=i(95402),f=i(93215),v=i(90970),_=i(33162),C=i(67026),b=i(79857),S=i(16375),w=i(54732),x=i(16458),y=i(15498),L=i(28130),N=i(89999),I=i(50200),M=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class T{constructor(e,t){this.range=e,this.direction=t}}class R{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new R(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return M(this,void 0,void 0,(function*(){if("function"===typeof this.provider.resolveInlayHint){if(this._currentResolve){if(yield this._currentResolve,e.isCancellationRequested)return;return this.resolve(e)}this._isResolved||(this._currentResolve=this._doResolve(e).finally((()=>this._currentResolve=void 0))),yield this._currentResolve}}))}_doResolve(e){var t,i;return M(this,void 0,void 0,(function*(){try{const n=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=null!==(t=null===n||void 0===n?void 0:n.tooltip)&&void 0!==t?t:this.hint.tooltip,this.hint.label=null!==(i=null===n||void 0===n?void 0:n.label)&&void 0!==i?i:this.hint.label,this._isResolved=!0}catch(n){(0,d.Cp)(n),this._isResolved=!1}}))}}class O{static create(e,t,i,n){return M(this,void 0,void 0,(function*(){const o=[],s=e.ordered(t).reverse().map((e=>i.map((i=>M(this,void 0,void 0,(function*(){try{const s=yield e.provideInlayHints(t,i,n);(null===s||void 0===s?void 0:s.hints.length)&&o.push([s,e])}catch(s){(0,d.Cp)(s)}}))))));if(yield Promise.all(s.flat()),n.isCancellationRequested||t.isDisposed())throw new d.FU;return new O(i,o,t)}))}constructor(e,t,i){this._disposables=new c.SL,this.ranges=e,this.provider=new Set;const n=[];for(const[o,s]of t){this._disposables.add(o),this.provider.add(s);for(const e of o.hints){const t=i.validatePosition(e.position);let o="before";const r=O._getRangeAtPosition(i,t);let a;r.getStartPosition().isBefore(t)?(a=_.e.fromPositions(r.getStartPosition(),t),o="after"):(a=_.e.fromPositions(t,r.getEndPosition()),o="before"),n.push(new R(e,new T(a,o),s))}}this.items=n.sort(((e,t)=>N.L.compare(e.hint.position,t.hint.position)))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,n=e.getWordAtPosition(t);if(n)return new _.e(i,n.startColumn,i,n.endColumn);e.tokenization.tokenizeIfCheap(i);const o=e.tokenization.getLineTokens(i),s=t.column-1,r=o.findTokenIndexAtOffset(s);let a=o.getStartOffset(r),l=o.getEndOffset(r);return l-a===1&&(a===s&&r>1?(a=o.getStartOffset(r-1),l=o.getEndOffset(r-1)):l===s&&r<o.getCount()-1&&(a=o.getStartOffset(r+1),l=o.getEndOffset(r+1))),new _.e(i,a+1,i,l+1)}}function P(e){return g.o.from({scheme:I.lg.command,path:e.id,query:e.arguments&&encodeURIComponent(JSON.stringify(e.arguments))}).toString()}var D,A=i(23507),E=i(46871),k=i(39326),F=i(21881),V=i(18736),H=i(47277),W=i(32656),U=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},K=function(e,t){return function(i,n){t(i,n,e)}},B=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class j{constructor(){this._entries=new u.z6(50)}get(e){const t=j._key(e);return this._entries.get(t)}set(e,t){const i=j._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const q=(0,F.yh)("IInlayHintsCache");(0,k.z)(q,j,1);class Y{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return"string"===typeof e?{label:e}:e[this.index]}}class Q{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let $=D=class{static get(e){var t;return null!==(t=e.getContribution(D.ID))&&void 0!==t?t:void 0}constructor(e,t,i,n,o,s,r){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=n,this._commandService=o,this._notificationService=s,this._instaService=r,this._disposables=new c.SL,this._sessionDisposables=new c.SL,this._decorationsMetadata=new Map,this._ruleFactory=new p.t7(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange((()=>this._update()))),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(139)&&this._update()}))),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(139);if("off"===e.enabled)return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const i=this._inlayHintsCache.get(t);let n;i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add((0,c.OF)((()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)})));const o=new Set,r=new a.pY((()=>B(this,void 0,void 0,(function*(){const e=Date.now();null===n||void 0===n||n.dispose(!0),n=new l.A;const i=t.onWillDispose((()=>null===n||void 0===n?void 0:n.cancel()));try{const i=n.token,s=yield O.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),i);if(r.delay=this._debounceInfo.update(t,Date.now()-e),i.isCancellationRequested)return void s.dispose();for(const e of s.provider)"function"!==typeof e.onDidChangeInlayHints||o.has(e)||(o.add(e),this._sessionDisposables.add(e.onDidChangeInlayHints((()=>{r.isScheduled()||r.schedule()}))));this._sessionDisposables.add(s),this._updateHintsDecorators(s.ranges,s.items),this._cacheHintsForFastRestore(t)}catch(s){(0,d.dL)(s)}finally{n.dispose(),i.dispose()}}))),this._debounceInfo.get(t));if(this._sessionDisposables.add(r),this._sessionDisposables.add((0,c.OF)((()=>null===n||void 0===n?void 0:n.dispose(!0)))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((e=>{!e.scrollTopChanged&&r.isScheduled()||r.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((e=>{const t=Math.max(r.delay,1250);r.schedule(t)}))),"on"===e.enabled)this._activeRenderMode=0;else{let t,i;"onUnlessPressed"===e.enabled?(t=0,i=1):(t=1,i=0),this._activeRenderMode=t,this._sessionDisposables.add(s._q.getInstance().event((e=>{if(!this._editor.hasModel())return;const n=e.altKey&&e.ctrlKey&&!e.shiftKey&&!e.metaKey?i:t;if(n!==this._activeRenderMode){this._activeRenderMode=n;const e=this._editor.getModel(),t=this._copyInlayHintsWithCurrentAnchor(e);this._updateHintsDecorators([e.getFullModelRange()],t),r.schedule(0)}})))}this._sessionDisposables.add(this._installDblClickGesture((()=>r.schedule(0)))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new c.SL,t=e.add(new L.yN(this._editor)),i=new c.SL;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown((e=>{const[t]=e,n=this._getInlayHintLabelPart(t),o=this._editor.getModel();if(!n||!o)return void i.clear();const s=new l.A;i.add((0,c.OF)((()=>s.dispose(!0)))),n.item.resolve(s.token),this._activeInlayHintPart=n.part.command||n.part.location?new Q(n,t.hasTriggerModifier):void 0;const r=o.validatePosition(n.item.hint.position).lineNumber,a=new _.e(r,1,r,o.getLineMaxColumn(r)),d=this._getInlineHintsForRange(a);this._updateHintsDecorators([a],d),i.add((0,c.OF)((()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([a],d)})))}))),e.add(t.onCancel((()=>i.clear()))),e.add(t.onExecute((e=>B(this,void 0,void 0,(function*(){const t=this._getInlayHintLabelPart(e);if(t){const i=t.part;i.location?this._instaService.invokeFunction(A.K,e,this._editor,i.location):C.mY.is(i.command)&&(yield this._invokeCommand(i.command,t.item))}}))))),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp((t=>B(this,void 0,void 0,(function*(){if(2!==t.event.detail)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),yield i.item.resolve(l.T.None),(0,r.Of)(i.item.hint.textEdits))){const t=i.item.hint.textEdits.map((e=>v.h.replace(_.e.lift(e.range),e.text)));this._editor.executeEdits("inlayHint.default",t),e()}}))))}_installContextMenu(){return this._editor.onContextMenu((e=>B(this,void 0,void 0,(function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(A.u,this._editor,e.event.target,t))}))))}_getInlayHintLabelPart(e){var t;if(6!==e.target.type)return;const i=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return i instanceof S.HS&&(null===i||void 0===i?void 0:i.attachedData)instanceof Y?i.attachedData:void 0}_invokeCommand(e,t){var i;return B(this,void 0,void 0,(function*(){try{yield this._commandService.executeCommand(e.id,...null!==(i=e.arguments)&&void 0!==i?i:[])}catch(n){this._notificationService.notify({severity:V.zb.Error,source:t.provider.displayName,message:n})}}))}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,n]of this._decorationsMetadata){if(t.has(n.item))continue;const o=e.getDecorationRange(i);if(o){const e=new T(o,n.item.anchor.direction),i=n.item.with({anchor:e});t.set(n.item,i)}}return Array.from(t.values())}_getHintsRanges(){const e=30,t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(const o of i.sort(_.e.compareRangesUsingStarts)){const i=t.validateRange(new _.e(o.startLineNumber-e,o.startColumn,o.endLineNumber+e,o.endColumn));0!==n.length&&_.e.areIntersectingOrTouching(n[n.length-1],i)?n[n.length-1]=_.e.plusRange(n[n.length-1],i):n.push(i)}return n}_updateHintsDecorators(e,t){var i,n;const o=[],s=(e,t,i,n,s)=>{const r={content:i,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:n,attachedData:s};o.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:{description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0,[e.anchor.direction]:0===this._activeRenderMode?r:void 0}}})},a=(e,t)=>{const i=this._ruleFactory.createClassNameRef({width:(l/3|0)+"px",display:"inline-block"});s(e,i," ",t?b.RM.Right:b.RM.None)},{fontSize:l,fontFamily:d,padding:c,isUniform:u}=this._getLayoutInfo(),h="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(h,d);for(const m of t){m.hint.paddingLeft&&a(m,!1);const e="string"===typeof m.hint.label?[{label:m.hint.label}]:m.hint.label;for(let t=0;t<e.length;t++){const n=e[t],o=0===t,a=t===e.length-1,d={fontSize:`${l}px`,fontFamily:`var(${h}), ${f.hL.fontFamily}`,verticalAlign:u?"baseline":"middle",unicodeBidi:"isolate"};(0,r.Of)(m.hint.textEdits)&&(d.cursor="default"),this._fillInColors(d,m.hint),(n.command||n.location)&&(null===(i=this._activeInlayHintPart)||void 0===i?void 0:i.part.item)===m&&this._activeInlayHintPart.part.index===t&&(d.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(d.color=(0,W.EN)(H._Yy),d.cursor="pointer")),c&&(o&&a?(d.padding=`1px ${0|Math.max(1,l/4)}px`,d.borderRadius=(l/4|0)+"px"):o?(d.padding=`1px 0 1px ${0|Math.max(1,l/4)}px`,d.borderRadius=`${l/4|0}px 0 0 ${l/4|0}px`):a?(d.padding=`1px ${0|Math.max(1,l/4)}px 1px 0`,d.borderRadius=`0 ${l/4|0}px ${l/4|0}px 0`):d.padding="1px 0 1px 0"),s(m,this._ruleFactory.createClassNameRef(d),z(n.label),a&&!m.hint.paddingRight?b.RM.Right:b.RM.None,new Y(m,t))}if(m.hint.paddingRight&&a(m,!0),o.length>D._MAX_DECORATORS)break}const g=[];for(const r of e)for(const{id:e}of null!==(n=this._editor.getDecorationsInRange(r))&&void 0!==n?n:[]){const t=this._decorationsMetadata.get(e);t&&(g.push(e),t.classNameRef.dispose(),this._decorationsMetadata.delete(e))}const p=m.Z.capture(this._editor);this._editor.changeDecorations((e=>{const t=e.deltaDecorations(g,o.map((e=>e.decoration)));for(let i=0;i<t.length;i++){const e=o[i];this._decorationsMetadata.set(t[i],e)}})),p.restore(this._editor)}_fillInColors(e,t){t.kind===C.gl.Parameter?(e.backgroundColor=(0,W.EN)(H.phM),e.color=(0,W.EN)(H.HCL)):t.kind===C.gl.Type?(e.backgroundColor=(0,W.EN)(H.bKB),e.color=(0,W.EN)(H.hX8)):(e.backgroundColor=(0,W.EN)(H.PpC),e.color=(0,W.EN)(H.VVv))}_getLayoutInfo(){const e=this._editor.getOption(139),t=e.padding,i=this._editor.getOption(52),n=this._editor.getOption(49);let o=e.fontSize;(!o||o<5||o>i)&&(o=i);const s=e.fontFamily||n,r=!t&&s===n&&o===i;return{fontSize:o,fontFamily:s,padding:t,isUniform:r}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};function z(e){const t=" ";return e.replace(/[ \t]/g,t)}$.ID="editor.contrib.InlayHints",$._MAX_DECORATORS=1500,$=D=U([K(1,x.p),K(2,w.A),K(3,q),K(4,E.H),K(5,V.lT),K(6,F.TG)],$),E.P.registerCommand("_executeInlayHintProvider",((e,...t)=>B(void 0,void 0,void 0,(function*(){const[i,n]=t;(0,h.p_)(g.o.isUri(i)),(0,h.p_)(_.e.isIRange(n));const{inlayHintsProvider:o}=e.get(x.p),s=yield e.get(y.S).createModelReference(i);try{const e=yield O.create(o,s.object.textEditorModel,[_.e.lift(n)],l.T.None),t=e.items.map((e=>e.hint));return setTimeout((()=>e.dispose()),0),t}finally{s.dispose()}}))));var G=i(81478),Z=i(61141),J=i(48864),X=i(25903),ee=i(47596),te=i(6544),ie=i(25206),ne=i(47606),oe=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},se=function(e,t){return function(i,n){t(i,n,e)}},re=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))},ae=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){t=e[i](t),o(n,s,t.done,t.value)}))}}function o(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)}};class le extends o.YM{constructor(e,t,i,n){super(10,t,e.item.anchor.range,i,n,!0),this.part=e}}let de=class extends X.D5{constructor(e,t,i,n,o,s){super(e,t,i,n,s),this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;const i=$.get(this._editor);if(!i)return null;if(6!==e.target.type)return null;const n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof S.HS&&n.attachedData instanceof Y?new le(n.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof le?new a.Aq((t=>re(this,void 0,void 0,(function*(){var n,o,s,a;const{part:l}=e;if(yield l.item.resolve(i),i.isCancellationRequested)return;let d,c;if("string"===typeof l.item.hint.tooltip?d=(new G.W5).appendText(l.item.hint.tooltip):l.item.hint.tooltip&&(d=l.item.hint.tooltip),d&&t.emitOne(new X.hU(this,e.range,[d],!1,0)),(0,r.Of)(l.item.hint.textEdits)&&t.emitOne(new X.hU(this,e.range,[(new G.W5).appendText((0,ie.NC)("hint.dbl","Double-click to insert"))],!1,10001)),"string"===typeof l.part.tooltip?c=(new G.W5).appendText(l.part.tooltip):l.part.tooltip&&(c=l.part.tooltip),c&&t.emitOne(new X.hU(this,e.range,[c],!1,1)),l.part.location||l.part.command){let i;const n="altKey"===this._editor.getOption(77),o=n?ne.dz?(0,ie.NC)("links.navigate.kb.meta.mac","cmd + click"):(0,ie.NC)("links.navigate.kb.meta","ctrl + click"):ne.dz?(0,ie.NC)("links.navigate.kb.alt.mac","option + click"):(0,ie.NC)("links.navigate.kb.alt","alt + click");l.part.location&&l.part.command?i=(new G.W5).appendText((0,ie.NC)("hint.defAndCommand","Go to Definition ({0}), right click for more",o)):l.part.location?i=(new G.W5).appendText((0,ie.NC)("hint.def","Go to Definition ({0})",o)):l.part.command&&(i=new G.W5(`[${(0,ie.NC)("hint.cmd","Execute Command")}](${P(l.part.command)} "${l.part.command.title}") (${o})`,{isTrusted:!0})),i&&t.emitOne(new X.hU(this,e.range,[i],!1,1e4))}const u=yield this._resolveInlayHintLabelPartHover(l,i);try{for(var h,g=!0,p=ae(u);h=yield p.next(),n=h.done,!n;g=!0){a=h.value,g=!1;const e=a;t.emitOne(e)}}catch(m){o={error:m}}finally{try{g||n||!(s=p.return)||(yield s.call(p))}finally{if(o)throw o.error}}})))):a.Aq.EMPTY}_resolveInlayHintLabelPartHover(e,t){return re(this,void 0,void 0,(function*(){if(!e.part.location)return a.Aq.EMPTY;const{uri:i,range:n}=e.part.location,o=yield this._resolverService.createModelReference(i);try{const i=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(i)?(0,J.R8)(this._languageFeaturesService.hoverProvider,i,new N.L(n.startLineNumber,n.startColumn),t).filter((e=>!(0,G.CP)(e.hover.contents))).map((t=>new X.hU(this,e.item.anchor.range,t.hover.contents,!1,2+t.ordinal))):a.Aq.EMPTY}finally{o.dispose()}}))}};de=oe([se(1,Z.O),se(2,te.v4),se(3,ee.Ui),se(4,y.S),se(5,x.p)],de),(0,n._K)($.ID,$,1),o.Ae.register(de)},23507:(e,t,i)=>{i.d(t,{K:()=>C,u:()=>_});var n=i(2548),o=i(10205),s=i(55191),r=i(7091),a=i(33162),l=i(15498),d=i(68703),c=i(78097),u=i(82693),h=i(46871),g=i(37174),p=i(93753),m=i(21881),f=i(18736),v=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function _(e,t,i,c){var g;return v(this,void 0,void 0,(function*(){const _=e.get(l.S),C=e.get(p.i),b=e.get(h.H),S=e.get(m.TG),w=e.get(f.lT);if(yield c.item.resolve(s.T.None),!c.part.location)return;const x=c.part.location,y=[],L=new Set(u.BH.getMenuItems(u.eH.EditorContext).map((e=>(0,u.vr)(e)?e.command.id:(0,r.R)())));for(const e of d.Bj.all())L.has(e.desc.id)&&y.push(new o.aU(e.desc.id,u.U8.label(e.desc,{renderShortTitle:!0}),void 0,!0,(()=>v(this,void 0,void 0,(function*(){const i=yield _.createModelReference(x.uri);try{const n=new d._k(i.object.textEditorModel,a.e.getStartPosition(x.range)),o=c.item.anchor.range;yield S.invokeFunction(e.runEditorCommand.bind(e),t,n,o)}finally{i.dispose()}})))));if(c.part.command){const{command:e}=c.part;y.push(new o.Z0),y.push(new o.aU(e.id,e.title,void 0,!0,(()=>v(this,void 0,void 0,(function*(){var t;try{yield b.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}catch(i){w.notify({severity:f.zb.Error,source:c.item.provider.displayName,message:i})}})))))}const N=t.getOption(126);C.showContextMenu({domForShadowRoot:N&&null!==(g=t.getDomNode())&&void 0!==g?g:void 0,getAnchor:()=>{const e=n.i(i);return{x:e.left,y:e.top+e.height+8}},getActions:()=>y,onHide:()=>{t.focus()},autoSelectFirstItem:!0})}))}function C(e,t,i,n){return v(this,void 0,void 0,(function*(){const o=e.get(l.S),s=yield o.createModelReference(n.uri);yield i.invokeWithinContext((e=>v(this,void 0,void 0,(function*(){const o=t.hasSideBySideModifier,r=e.get(g.i6),l=c.Jy.inPeekEditor.getValue(r),u=!o&&i.getOption(87)&&!l,h=new d.BT({openToSide:o,openInPeek:u,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0});return h.run(e,new d._k(s.object.textEditorModel,a.e.getStartPosition(n.range)),a.e.lift(n.range))})))),s.dispose()}))}},34665:(e,t,i)=>{i.d(t,{Np:()=>o,OW:()=>s,Ou:()=>n});const n="editor.action.inlineSuggest.commit",o="editor.action.inlineSuggest.showPrevious",s="editor.action.inlineSuggest.showNext"},42985:(e,t,i)=>{i.d(t,{f:()=>d});var n=i(40164),o=i(61720),s=i(16779),r=i(37174),a=i(70959),l=i(25206);class d extends a.JT{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=d.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=d.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=d.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=d.suppressSuggestions.bindTo(this.contextKeyService),this._register((0,n.EH)((e=>{const t=this.model.read(e),i=null===t||void 0===t?void 0:t.state.read(e),n=!!(null===i||void 0===i?void 0:i.inlineCompletion)&&void 0!==(null===i||void 0===i?void 0:i.ghostText)&&!(null===i||void 0===i?void 0:i.ghostText.isEmpty());this.inlineCompletionVisible.set(n),(null===i||void 0===i?void 0:i.ghostText)&&(null===i||void 0===i?void 0:i.inlineCompletion)&&this.suppressSuggestions.set(i.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)}))),this._register((0,n.EH)((e=>{const t=this.model.read(e);let i=!1,n=!0;const r=null===t||void 0===t?void 0:t.ghostText.read(e);if((null===t||void 0===t?void 0:t.selectedSuggestItem)&&r&&r.parts.length>0){const{column:e,lines:a}=r.parts[0],l=a[0],d=t.textModel.getLineIndentColumn(r.lineNumber),c=e<=d;if(c){let e=(0,o.LC)(l);-1===e&&(e=l.length-1),i=e>0;const r=t.textModel.getOptions().tabSize,a=s.i.visibleColumnFromColumn(l,e+1,r);n=a<r}}this.inlineCompletionSuggestsIndentation.set(i),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)})))}}d.inlineSuggestionVisible=new r.uy("inlineSuggestionVisible",!1,(0,l.NC)("inlineSuggestionVisible","Whether an inline suggestion is visible")),d.inlineSuggestionHasIndentation=new r.uy("inlineSuggestionHasIndentation",!1,(0,l.NC)("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),d.inlineSuggestionHasIndentationLessThanTabSize=new r.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,l.NC)("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),d.suppressSuggestions=new r.uy("inlineSuggestionSuppressSuggestions",void 0,(0,l.NC)("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"))},21053:(e,t,i)=>{var n=i(48077),o=i(97791),s=i(40164),r=i(44950),a=i(34665),l=i(42985),d=i(69332),c=i(11271),u=i(70959),h=i(25109),g=i(89999),p=i(54732),m=i(16458),f=i(82168),v=i(61720),_=i(6155),C=i(93215),b=i(33162),S=i(69427),w=i(61141),x=i(79857),y=i(81083),L=i(56998),N=i(93489),I=i(98642);function M(e,t){const i=new T(e),n=t.map((e=>{const t=b.e.lift(e.range);return{startOffset:i.getOffset(t.getStartPosition()),endOffset:i.getOffset(t.getEndPosition()),text:e.text}}));n.sort(((e,t)=>t.startOffset-e.startOffset));for(const o of n)e=e.substring(0,o.startOffset)+o.text+e.substring(o.endOffset);return e}class T{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}const R=[];function O(){return R}class P{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new I.he(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new b.e(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function D(e,t){const i=new u.SL,n=e.createDecorationsCollection();return i.add((0,s.UV)({debugName:()=>`Apply decorations from ${t.debugName}`},(e=>{const i=t.read(e);n.set(i)}))),i.add({dispose:()=>{n.clear()}}),i}function A(e,t){return new g.L(e.lineNumber+t.lineNumber-1,1===t.lineNumber?e.column+t.column-1:t.column)}function E(e){let t=1,i=1;for(const n of e)"\n"===n?(t++,i=1):i++;return new g.L(t,i)}class k{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every(((t,i)=>t.equals(e.parts[i])))}renderForScreenReader(e){if(0===this.parts.length)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1),n=M(i,this.parts.map((e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")}))));return n.substring(this.parts[0].column-1)}isEmpty(){return this.parts.every((e=>0===e.lines.length))}get lineCount(){return 1+this.parts.reduce(((e,t)=>e+t.lines.length-1),0)}}class F{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every(((t,i)=>t===e.lines[i]))}}class V{constructor(e,t,i,n=0){this.lineNumber=e,this.columnRange=t,this.newLines=i,this.additionalReservedLineCount=n,this.parts=[new F(this.columnRange.endColumnExclusive,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join("\n")}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every((e=>0===e.lines.length))}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every(((t,i)=>t===e.newLines[i]))&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function H(e,t){return e===t||!(!e||!t)&&((e instanceof k&&t instanceof k||e instanceof V&&t instanceof V)&&e.equals(t))}var W=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t){return function(i,n){t(i,n,e)}};const K="ghost-text";let B=class extends u.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,s.uh)(this,!1),this.currentTextModel=(0,s.rD)(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this.uiState=(0,s.nK)(this,(e=>{if(this.isDisposed.read(e))return;const t=this.currentTextModel.read(e);if(t!==this.model.targetTextModel.read(e))return;const i=this.model.ghostText.read(e);if(!i)return;const n=i instanceof V?i.columnRange:void 0,o=[],s=[];function r(e,t){if(s.length>0){const i=s[s.length-1];t&&i.decorations.push(new L.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)s.push({content:i,decorations:t?[new L.Kp(1,i.length+1,t,0)]:[]})}const a=t.getLineContent(i.lineNumber);let l,d=0;for(const u of i.parts){let e=u.lines;void 0===l?(o.push({column:u.column,text:e[0],preview:u.preview}),e=e.slice(1)):r([a.substring(d,u.column-1)],void 0),e.length>0&&(r(e,K),void 0===l&&u.column<=a.length&&(l=u.column)),d=u.column-1}void 0!==l&&r([a.substring(d)],void 0);const c=void 0!==l?new P(l,a.length+1):void 0;return{replacedRange:n,inlineTexts:o,additionalLines:s,hiddenRange:c,lineNumber:i.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(e),targetTextModel:t}})),this.decorations=(0,s.nK)(this,(e=>{const t=this.uiState.read(e);if(!t)return[];const i=[];t.replacedRange&&i.push({range:t.replacedRange.toRange(t.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),t.hiddenRange&&i.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const n of t.inlineTexts)i.push({range:b.e.fromPositions(new g.L(t.lineNumber,n.column)),options:{description:K,after:{content:n.text,inlineClassName:n.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:x.RM.Left},showIfCollapsed:!0}});return i})),this.additionalLinesWidget=this._register(new j(this.editor,this.languageService.languageIdCodec,(0,s.nK)((e=>{const t=this.uiState.read(e);return t?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0})))),this._register((0,u.OF)((()=>{this.isDisposed.set(!0,void 0)}))),this._register(D(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};B=W([U(2,w.O)],B);class j extends u.JT{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=(0,s.aq)("editorOptionChanged",c.ju.filter(this.editor.onDidChangeConfiguration,(e=>e.hasChanged(33)||e.hasChanged(116)||e.hasChanged(98)||e.hasChanged(93)||e.hasChanged(51)||e.hasChanged(50)||e.hasChanged(66)))),this._register((0,s.EH)((e=>{const t=this.lines.read(e);this.editorOptionsChanged.read(e),t?this.updateLines(t.lineNumber,t.additionalLines,t.minReservedLineCount):this.clear()})))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones((e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:o}=n.getOptions();this.editor.changeViewZones((n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);const s=Math.max(t.length,i);if(s>0){const i=document.createElement("div");q(i,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:s,domNode:i,afterColumnAffinity:1})}}))}}function q(e,t,i,n,o){const s=n.get(33),r=n.get(116),a="none",l=n.get(93),d=n.get(51),c=n.get(50),u=n.get(66),h=new S.HT(1e4);h.appendString('<div class="suggest-preview-text">');for(let m=0,f=i.length;m<f;m++){const e=i[m],n=e.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(m*u)),h.appendString('px;width:1000000px;">');const g=v.$i(n),p=v.Ut(n),f=y.A.createEmpty(n,o);(0,N.d1)(new N.IJ(c.isMonospace&&!s,c.canUseHalfwidthRightwardsArrow,n,!1,g,p,0,f,e.decorations,t,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,r,a,l,d!==C.n0.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),(0,_.N)(e,c);const g=h.build(),p=Y?Y.createHTML(g):g;e.innerHTML=p}const Y=(0,f.Z)("editorGhostText",{createHTML:e=>e});var Q=i(70955),$=i(75912),z=i(55455),G=i(90970),Z=i(67026),J=i(97297),X=i(55191),ee=i(70546),te=i(65662),ie=i(85398),ne=i(71400),oe=i(98817),se=i(43124),re=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function ae(e,t,i,n,o=X.T.None,s){return re(this,void 0,void 0,(function*(){const r=ue(t,i),a=e.all(i),l=new ne.ri;for(const e of a)e.groupId&&l.add(e.groupId,e);function d(e){if(!e.yieldsToGroupIds)return[];const t=[];for(const i of e.yieldsToGroupIds||[]){const e=l.get(i);for(const i of e)t.push(i)}return t}const c=new Map,u=new Set;function h(e,t){if(t=[...t,e],u.has(e))return t;u.add(e);try{const i=d(e);for(const e of i){const i=h(e,t);if(i)return i}}finally{u.delete(e)}}function g(e){const s=c.get(e);if(s)return s;const r=h(e,[]);r&&(0,I.Cp)(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${r.map((e=>e.toString?e.toString():""+e)).join(" -> ")}`));const a=new ie.CR;return c.set(e,a.p),(()=>re(this,void 0,void 0,(function*(){if(!r){const t=d(e);for(const e of t){const t=yield g(e);if(t&&t.items.length>0)return}}try{const s=yield e.provideInlineCompletions(i,t,n,o);return s}catch(s){return void(0,I.Cp)(s)}})))().then((e=>a.complete(e)),(e=>a.error(e))),a.p}const p=yield Promise.all(a.map((e=>re(this,void 0,void 0,(function*(){return{provider:e,completions:yield g(e)}}))))),m=new Map,f=[];for(const e of p){const t=e.completions;if(!t)continue;const n=new de(t,e.provider);f.push(n);for(const e of t.items){const t=ce.from(e,n,r,i,s);m.set(t.hash(),t)}}return new le(Array.from(m.values()),new Set(m.keys()),f)}))}class le{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class de{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,0===this.refCount&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class ce{static from(e,t,i,n,o){let s,r,a=e.range?b.e.lift(e.range):i;if("string"===typeof e.insertText){if(s=e.insertText,o&&e.completeBracketPairs){s=he(s,a.getStartPosition(),n,o);const t=s.length-e.insertText.length;0!==t&&(a=new b.e(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+t))}r=void 0}else if("snippet"in e.insertText){const t=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=he(e.insertText.snippet,a.getStartPosition(),n,o);const i=e.insertText.snippet.length-t;0!==i&&(a=new b.e(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+i))}const i=(new se.Yj).parse(e.insertText.snippet);1===i.children.length&&i.children[0]instanceof se.xv?(s=i.children[0].value,r=void 0):(s=i.toString(),r={snippet:e.insertText.snippet,range:a})}else(0,te.vE)(e.insertText);return new ce(s,e.command,a,s,r,e.additionalTextEdits||O(),e,t)}constructor(e,t,i,n,o,s,r,a){this.filterText=e,this.command=t,this.range=i,this.insertText=n,this.snippetInfo=o,this.additionalTextEdits=s,this.sourceInlineCompletion=r,this.source=a,e=e.replace(/\r\n|\r/g,"\n"),n=e.replace(/\r\n|\r/g,"\n")}withRange(e){return new ce(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}function ue(e,t){const i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new b.e(e.lineNumber,i.startColumn,e.lineNumber,n):b.e.fromPositions(e,e.with(void 0,n))}function he(e,t,i,n){const o=i.getLineContent(t.lineNumber).substring(0,t.column-1),s=o+e,r=i.tokenization.tokenizeLineWithEdit(t,s.length-(t.column-1),e),a=null===r||void 0===r?void 0:r.sliceAndInflate(t.column-1,s.length,0);if(!a)return e;const l=(0,oe.r)(a,n);return l}var ge=i(88994);class pe{constructor(e,t){this.range=e,this.text=t}removeCommonPrefix(e,t){const i=t?this.range.intersectRanges(t):this.range;if(!i)return this;const n=e.getValueInRange(i,1),o=(0,v.Mh)(n,this.text),s=A(this.range.getStartPosition(),E(n.substring(0,o))),r=this.text.substring(o),a=b.e.fromPositions(s,this.range.getEndPosition());return new pe(a,r)}augments(e){return this.text.startsWith(e.text)&&me(this.range,e.range)}computeGhostText(e,t,i,n=0){let o=this.removeCommonPrefix(e);if(o.range.endLineNumber!==o.range.startLineNumber)return;const s=e.getLineContent(o.range.startLineNumber),r=(0,v.V8)(s).length,a=o.range.startColumn-1<=r;if(a){const e=(0,v.V8)(o.text).length,t=s.substring(o.range.startColumn-1,r),[i,n]=[o.range.getStartPosition(),o.range.getEndPosition()],a=i.column+t.length<=n.column?i.delta(0,t.length):n,l=b.e.fromPositions(a,n),d=o.text.startsWith(t)?o.text.substring(t.length):o.text.substring(e);o=new pe(l,d)}const l=e.getValueInRange(o.range),d=ve(l,o.text);if(!d)return;const c=o.range.startLineNumber,u=new Array;if("prefix"===t){const e=d.filter((e=>0===e.originalLength));if(e.length>1||1===e.length&&e[0].originalStart!==l.length)return}const h=o.text.length-n;for(const g of d){const e=o.range.startColumn+g.originalStart+g.originalLength;if("subwordSmart"===t&&i&&i.lineNumber===o.range.startLineNumber&&e<i.column)return;if(g.originalLength>0)return;if(0===g.modifiedLength)continue;const n=g.modifiedStart+g.modifiedLength,s=Math.max(g.modifiedStart,Math.min(n,h)),r=o.text.substring(g.modifiedStart,s),a=o.text.substring(s,Math.max(g.modifiedStart,n));if(r.length>0){const t=(0,v.uq)(r);u.push(new F(e,t,!1))}if(a.length>0){const t=(0,v.uq)(a);u.push(new F(e,t,!0))}}return new k(c,u)}}function me(e,t){return t.getStartPosition().equals(e.getStartPosition())&&t.getEndPosition().isBeforeOrEqual(e.getEndPosition())}let fe;function ve(e,t){if((null===fe||void 0===fe?void 0:fe.originalValue)===e&&(null===fe||void 0===fe?void 0:fe.newValue)===t)return null===fe||void 0===fe?void 0:fe.changes;{let i=Ce(e,t,!0);if(i){const n=_e(i);if(n>0){const o=Ce(e,t,!1);o&&_e(o)<n&&(i=o)}}return fe={originalValue:e,newValue:t,changes:i},i}}function _e(e){let t=0;for(const i of e)t+=i.originalLength;return t}function Ce(e,t,i){if(e.length>5e3||t.length>5e3)return;function n(e){let t=0;for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);n>t&&(t=n)}return t}const o=Math.max(n(e),n(t));function s(e){if(e<0)throw new Error("unexpected");return o+e+1}function r(e){let t=0,n=0;const o=new Int32Array(e.length);for(let r=0,a=e.length;r<a;r++)if(i&&"("===e[r]){const e=100*n+t;o[r]=s(2*e),t++}else if(i&&")"===e[r]){t=Math.max(t-1,0);const e=100*n+t;o[r]=s(2*e+1),0===t&&n++}else o[r]=e.charCodeAt(r);return o}const a=r(e),l=r(t);return new ge.Hs({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var be=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Se=function(e,t){return function(i,n){t(i,n,e)}},we=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let xe=class extends u.JT{constructor(e,t,i,n,o){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=n,this.languageConfigurationService=o,this._updateOperation=this._register(new u.XK),this.inlineCompletions=(0,s.DN)("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=(0,s.DN)("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent((()=>{this._updateOperation.clear()})))}fetch(e,t,i){var n,o;const r=new Le(e,t,this.textModel.getVersionId()),a=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(null===(n=this._updateOperation.value)||void 0===n?void 0:n.request.satisfies(r))return this._updateOperation.value.promise;if(null===(o=a.get())||void 0===o?void 0:o.request.satisfies(r))return Promise.resolve(!0);const l=!!this._updateOperation.value;this._updateOperation.clear();const d=new X.A,c=(()=>we(this,void 0,void 0,(function*(){const n=l||t.triggerKind===Z.bw.Automatic;if(n&&(yield ye(this._debounceValue.get(this.textModel))),d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const o=new Date,c=yield ae(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,d.token,this.languageConfigurationService);if(d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const u=new Date;this._debounceValue.update(this.textModel,u.getTime()-o.getTime());const h=new Me(c,r,this.textModel,this.versionId);if(i){const t=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!c.has(t)&&h.prepend(i.inlineCompletion,t.range,!0)}return this._updateOperation.clear(),(0,s.PS)((e=>{a.set(h,e)})),!0})))(),u=new Ie(r,d,c);return this._updateOperation.value=u,c}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(null===(t=this._updateOperation.value)||void 0===t?void 0:t.request.context.selectedSuggestionInfo)&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};function ye(e,t){return new Promise((i=>{let n;const o=setTimeout((()=>{n&&n.dispose(),i()}),e);t&&(n=t.onCancellationRequested((()=>{clearTimeout(o),n&&n.dispose(),i()})))}))}xe=be([Se(3,m.p),Se(4,J.c_)],xe);class Le{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&Ne(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,((e,t)=>e.equals(t)))&&(e.context.triggerKind===Z.bw.Automatic||this.context.triggerKind===Z.bw.Explicit)&&this.versionId===e.versionId}}function Ne(e,t,i){return e&&t?i(e,t):e===t}class Ie{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class Me{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,n){this.inlineCompletionProviderResult=e,this.request=t,this.textModel=i,this.versionId=n,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=(0,s.nK)(this,(e=>{this.versionId.read(e);let t=!1;for(const i of this._inlineCompletions)t=t||i._updateRange(this.textModel);return t&&this._rangeVersionIdValue++,this._rangeVersionIdValue}));const o=i.deltaDecorations([],e.completions.map((e=>({range:e.range,options:{description:"inline-completion-tracking-range"}}))));this._inlineCompletions=e.completions.map(((e,t)=>new Te(e,o[t],this._rangeVersionId)))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,0===this._refCount){setTimeout((()=>{this.textModel.isDisposed()||this.textModel.deltaDecorations(this._inlineCompletions.map((e=>e.decorationId)),[])}),0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const n=this.textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new Te(e,n,this._rangeVersionId,t)),this._prependedInlineCompletionItems.push(e)}}class Te{get forwardStable(){var e;return null!==(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)&&void 0!==e&&e}constructor(e,t,i,n){this.inlineCompletion=e,this.decorationId=t,this.rangeVersion=i,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=null!==n&&void 0!==n?n:e.range}toInlineCompletion(e){return this.inlineCompletion.withRange(this._getUpdatedRange(e))}toSingleTextEdit(e){return new pe(this._getUpdatedRange(e),this.inlineCompletion.insertText)}isVisible(e,t,i){const n=this._toFilterTextReplacement(i).removeCommonPrefix(e);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(i).getStartPosition())||t.lineNumber!==n.range.startLineNumber)return!1;const o=e.getValueInRange(n.range,1).toLowerCase(),s=n.text.toLowerCase(),r=Math.max(0,t.column-n.range.startColumn);let a=s.substring(0,r),l=s.substring(r),d=o.substring(0,r),c=o.substring(r);const u=e.getLineIndentColumn(n.range.startLineNumber);return n.range.startColumn<=u&&(d=d.trimStart(),0===d.length&&(c=c.trimStart()),a=a.trimStart(),0===a.length&&(l=l.trimStart())),a.startsWith(d)&&!!(0,ee.Sy)(c,l)}canBeReused(e,t){const i=this._isValid&&this._getUpdatedRange(void 0).containsPosition(t)&&this.isVisible(e,t,void 0)&&!this._isSmallerThanOriginal(void 0);return i}_toFilterTextReplacement(e){return new pe(this._getUpdatedRange(e),this.inlineCompletion.filterText)}_isSmallerThanOriginal(e){return Re(this._getUpdatedRange(e)).isBefore(Re(this.inlineCompletion.range))}_getUpdatedRange(e){return this.rangeVersion.read(e),this._updatedRange}_updateRange(e){const t=e.getDecorationRange(this.decorationId);return t?!this._updatedRange.equalsRange(t)&&(this._updatedRange=t,!0):(this._isValid=!1,!0)}}function Re(e){return e.startLineNumber===e.endLineNumber?new g.L(1,1+e.endColumn-e.startColumn):new g.L(1+e.endLineNumber-e.startLineNumber,e.endColumn)}var Oe,Pe=i(58151),De=i(46871),Ae=i(21881),Ee=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ke=function(e,t){return function(i,n){t(i,n,e)}},Fe=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};(function(e){e[e["Undo"]=0]="Undo",e[e["Redo"]=1]="Redo",e[e["AcceptWord"]=2]="AcceptWord",e[e["Other"]=3]="Other"})(Oe||(Oe={}));let Ve=class extends u.JT{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,n,o,r,a,l,d,c,u,h){let g;super(),this.textModel=e,this.selectedSuggestItem=t,this.cursorPosition=i,this.textModelVersionId=n,this._debounceValue=o,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=d,this._instantiationService=c,this._commandService=u,this._languageConfigurationService=h,this._source=this._register(this._instantiationService.createInstance(xe,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=(0,s.uh)(this,!1),this._forceUpdate=(0,s.GN)("forceUpdate"),this._selectedInlineCompletionId=(0,s.uh)(this,void 0),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([Oe.Redo,Oe.Undo,Oe.AcceptWord]),this._fetchInlineCompletions=(0,s.aK)({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Z.bw.Automatic}),handleChange:(e,t)=>(e.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(e.change)?t.preserveCurrentCompletion=!0:e.didChange(this._forceUpdate)&&(t.inlineCompletionTriggerKind=e.change),!0)},((e,t)=>{this._forceUpdate.read(e);const i=this._enabled.read(e)&&this.selectedSuggestItem.read(e)||this._isActive.read(e);if(!i)return void this._source.cancelUpdate();this.textModelVersionId.read(e);const n=this.selectedInlineCompletion.get(),o=t.preserveCurrentCompletion||(null===n||void 0===n?void 0:n.forwardStable)?n:void 0,r=this._source.suggestWidgetInlineCompletions.get(),a=this.selectedSuggestItem.read(e);if(r&&!a){const e=this._source.inlineCompletions.get();(0,s.PS)((t=>{e&&r.request.versionId>e.request.versionId&&this._source.inlineCompletions.set(r.clone(),t),this._source.clearSuggestWidgetInlineCompletions(t)}))}const l=this.cursorPosition.read(e),d={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:null===a||void 0===a?void 0:a.toSelectedSuggestionInfo()};return this._source.fetch(l,d,o)})),this._filteredInlineCompletionItems=(0,s.nK)(this,(e=>{const t=this._source.inlineCompletions.read(e);if(!t)return[];const i=this.cursorPosition.read(e),n=t.inlineCompletions.filter((t=>t.isVisible(this.textModel,i,e)));return n})),this.selectedInlineCompletionIndex=(0,s.nK)(this,(e=>{const t=this._selectedInlineCompletionId.read(e),i=this._filteredInlineCompletionItems.read(e),n=void 0===this._selectedInlineCompletionId?-1:i.findIndex((e=>e.semanticId===t));return-1===n?(this._selectedInlineCompletionId.set(void 0,void 0),0):n})),this.selectedInlineCompletion=(0,s.nK)(this,(e=>{const t=this._filteredInlineCompletionItems.read(e),i=this.selectedInlineCompletionIndex.read(e);return t[i]})),this.lastTriggerKind=this._source.inlineCompletions.map((e=>null===e||void 0===e?void 0:e.request.context.triggerKind)),this.inlineCompletionsCount=(0,s.nK)(this,(e=>this.lastTriggerKind.read(e)===Z.bw.Explicit?this._filteredInlineCompletionItems.read(e).length:void 0)),this.state=(0,s.bk)({owner:this,equalityComparer:(e,t)=>e&&t?H(e.ghostText,t.ghostText)&&e.inlineCompletion===t.inlineCompletion&&e.suggestItem===t.suggestItem:e===t},(e=>{var t;const i=this.textModel,n=this.selectedSuggestItem.read(e);if(n){const o=n.toSingleTextEdit().removeCommonPrefix(i),s=this._computeAugmentedCompletion(o,e),r=this._suggestPreviewEnabled.read(e);if(!r&&!s)return;const a=null!==(t=null===s||void 0===s?void 0:s.edit)&&void 0!==t?t:o,l=s?s.edit.text.length-o.text.length:0,d=this._suggestPreviewMode.read(e),c=this.cursorPosition.read(e),u=a.computeGhostText(i,d,c,l),h=null!==u&&void 0!==u?u:new k(a.range.endLineNumber,[]);return{ghostText:h,inlineCompletion:null===s||void 0===s?void 0:s.completion,suggestItem:n}}{if(!this._isActive.read(e))return;const t=this.selectedInlineCompletion.read(e);if(!t)return;const n=t.toSingleTextEdit(e),o=this._inlineSuggestMode.read(e),s=this.cursorPosition.read(e),r=n.computeGhostText(i,o,s);return r?{ghostText:r,inlineCompletion:t,suggestItem:void 0}:void 0}})),this.ghostText=(0,s.bk)({owner:this,equalityComparer:H},(e=>{const t=this.state.read(e);if(t)return t.ghostText})),this._register((0,s.jx)(this._fetchInlineCompletions)),this._register((0,s.EH)((e=>{var t,i;const n=this.state.read(e),o=null===n||void 0===n?void 0:n.inlineCompletion;if((null===o||void 0===o?void 0:o.semanticId)!==(null===g||void 0===g?void 0:g.semanticId)&&(g=o,o)){const e=o.inlineCompletion,n=e.source;null===(i=(t=n.provider).handleItemDidShow)||void 0===i||i.call(t,n.inlineCompletions,e.sourceInlineCompletion,e.insertText)}})))}trigger(e){return Fe(this,void 0,void 0,(function*(){this._isActive.set(!0,e),yield this._fetchInlineCompletions.get()}))}triggerExplicitly(e){return Fe(this,void 0,void 0,(function*(){(0,s.c8)(e,(e=>{this._isActive.set(!0,e),this._forceUpdate.trigger(e,Z.bw.Explicit)})),yield this._fetchInlineCompletions.get()}))}stop(e){(0,s.c8)(e,(e=>{this._isActive.set(!1,e),this._source.clear(e)}))}_computeAugmentedCompletion(e,t){const i=this.textModel,n=this._source.suggestWidgetInlineCompletions.read(t),o=n?n.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(z.$K),s=(0,$.Fr)(o,(n=>{let o=n.toSingleTextEdit(t);return o=o.removeCommonPrefix(i,b.e.fromPositions(o.range.getStartPosition(),e.range.getEndPosition())),o.augments(e)?{edit:o,completion:n}:void 0}));return s}_deltaSelectedInlineCompletionIndex(e){return Fe(this,void 0,void 0,(function*(){yield this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}))}next(){return Fe(this,void 0,void 0,(function*(){yield this._deltaSelectedInlineCompletionIndex(1)}))}previous(){return Fe(this,void 0,void 0,(function*(){yield this._deltaSelectedInlineCompletionIndex(-1)}))}accept(e){var t;return Fe(this,void 0,void 0,(function*(){if(e.getModel()!==this.textModel)throw new I.he;const i=this.state.get();if(!i||i.ghostText.isEmpty()||!i.inlineCompletion)return;const n=i.inlineCompletion.toInlineCompletion(void 0);e.pushUndoStop(),n.snippetInfo?(e.executeEdits("inlineSuggestion.accept",[G.h.replaceMove(n.range,""),...n.additionalTextEdits]),e.setPosition(n.snippetInfo.range.getStartPosition()),null===(t=Pe.f.get(e))||void 0===t||t.insert(n.snippetInfo.snippet,{undoStopBefore:!1})):e.executeEdits("inlineSuggestion.accept",[G.h.replaceMove(n.range,n.insertText),...n.additionalTextEdits]),n.command&&n.source.addRef(),(0,s.PS)((e=>{this._source.clear(e),this._isActive.set(!1,e)})),n.command&&(yield this._commandService.executeCommand(n.command.id,...n.command.arguments||[]).then(void 0,I.Cp),n.source.removeRef())}))}acceptNextWord(e){return Fe(this,void 0,void 0,(function*(){yield this._acceptNext(e,((e,t)=>{const i=this.textModel.getLanguageIdAtPosition(e.lineNumber,e.column),n=this._languageConfigurationService.getLanguageConfiguration(i),o=new RegExp(n.wordDefinition.source,n.wordDefinition.flags.replace("g","")),s=t.match(o);let r=0;r=s&&void 0!==s.index?0===s.index?s[0].length:s.index:t.length;const a=/\s+/g,l=a.exec(t);return l&&void 0!==l.index&&l.index+l[0].length<r&&(r=l.index+l[0].length),r}))}))}acceptNextLine(e){return Fe(this,void 0,void 0,(function*(){yield this._acceptNext(e,((e,t)=>{const i=t.match(/\n/);return i&&void 0!==i.index?i.index+1:t.length}))}))}_acceptNext(e,t){return Fe(this,void 0,void 0,(function*(){if(e.getModel()!==this.textModel)throw new I.he;const i=this.state.get();if(!i||i.ghostText.isEmpty()||!i.inlineCompletion)return;const n=i.ghostText,o=i.inlineCompletion.toInlineCompletion(void 0);if(o.snippetInfo||o.filterText!==o.insertText)return void(yield this.accept(e));const s=n.parts[0],r=new g.L(n.lineNumber,s.column),a=s.lines.join("\n"),l=t(r,a);if(l===a.length&&1===n.parts.length)return void this.accept(e);const d=a.substring(0,l);this._isAcceptingPartially=!0;try{e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[G.h.replace(b.e.fromPositions(r),d)]);const t=E(d);e.setPosition(A(r,t))}finally{this._isAcceptingPartially=!1}if(o.source.provider.handlePartialAccept){const t=b.e.fromPositions(o.range.getStartPosition(),A(r,E(d))),i=e.getModel().getValueInRange(t,1);o.source.provider.handlePartialAccept(o.source.inlineCompletions,o.sourceInlineCompletion,i.length)}}))}handleSuggestAccepted(e){var t,i;const n=e.toSingleTextEdit().removeCommonPrefix(this.textModel),o=this._computeAugmentedCompletion(n,void 0);if(!o)return;const s=o.completion.inlineCompletion;null===(i=(t=s.source.provider).handlePartialAccept)||void 0===i||i.call(t,s.source.inlineCompletions,s.sourceInlineCompletion,n.text.length)}};Ve=Ee([ke(9,Ae.TG),ke(10,De.H),ke(11,J.c_)],Ve);var He=i(69377),We=i(55743),Ue=i(21921);class Ke extends u.JT{get selectedItem(){return this._selectedItem}constructor(e,t,i,n){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=i,this.onWillAccept=n,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=(0,s.uh)(this,void 0),this._register(e.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(e.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const o=We.n.get(this.editor);if(o){this._register(o.registerSelector({priority:100,select:(e,t,i)=>{var n;(0,s.PS)((e=>this.checkModelVersion(e)));const r=this.editor.getModel();if(!r)return-1;const a=null===(n=this.suggestControllerPreselector())||void 0===n?void 0:n.removeCommonPrefix(r);if(!a)return-1;const l=g.L.lift(t),d=i.map(((e,t)=>{const i=Be.fromSuggestion(o,r,l,e,this.isShiftKeyPressed),n=i.toSingleTextEdit().removeCommonPrefix(r),s=a.augments(n);return{index:t,valid:s,prefixLength:n.text.length,suggestItem:e}})).filter((e=>e&&e.valid&&e.prefixLength>0)),c=(0,$.dI)(d,(0,Ue.tT)((e=>e.prefixLength),Ue.fv));return c?c.index:-1}}));let e=!1;const t=()=>{e||(e=!0,this._register(o.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(o.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.update(!1)}))),this._register(o.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(c.ju.once(o.model.onDidTrigger)((e=>{t()}))),this._register(o.onWillInsertSuggestItem((e=>{const t=this.editor.getPosition(),i=this.editor.getModel();if(!t||!i)return;const n=Be.fromSuggestion(o,i,t,e.item,this.isShiftKeyPressed);this.onWillAccept(n)})))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();this._isActive===e&&je(this._currentSuggestItemInfo,t)||(this._isActive=e,this._currentSuggestItemInfo=t,(0,s.PS)((e=>{this.checkModelVersion(e),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,e)})))}getSuggestItemInfo(){const e=We.n.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),n=this.editor.getModel();return t&&i&&n?Be.fromSuggestion(e,n,i,t.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const e=We.n.get(this.editor);null===e||void 0===e||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=We.n.get(this.editor);null===e||void 0===e||e.forceRenderingAbove()}}class Be{static fromSuggestion(e,t,i,n,o){let{insertText:s}=n.completion,r=!1;if(4&n.completion.insertTextRules){const e=(new se.Yj).parse(s);e.children.length<100&&He.l.adjustWhitespace(t,i,!0,e),s=e.toString(),r=!0}const a=e.getOverwriteInfo(n,o);return new Be(b.e.fromPositions(i.delta(0,-a.overwriteBefore),i.delta(0,Math.max(a.overwriteAfter,0))),s,n.completion.kind,r)}constructor(e,t,i,n){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=n}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new Z.ln(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new pe(this.range,this.insertText)}}function je(e,t){return e===t||!(!e||!t)&&e.equals(t)}var qe,Ye=i(25206),Qe=i(70936),$e=i(47596),ze=i(37174),Ge=i(15285),Ze=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Je=function(e,t){return function(i,n){t(i,n,e)}};let Xe=qe=class extends u.JT{static get(e){return e.getContribution(qe.ID)}constructor(e,t,i,n,o,r,d,p,m){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.configurationService=n,this.commandService=o,this.debounceService=r,this.languageFeaturesService=d,this.audioCueService=p,this._keybindingService=m,this.model=(0,s.DN)("inlineCompletionModel",void 0),this.textModelVersionId=(0,s.uh)(this,-1),this.cursorPosition=(0,s.uh)(this,new g.L(1,1)),this.suggestWidgetAdaptor=this._register(new Ke(this.editor,(()=>{var e,t;return null===(t=null===(e=this.model.get())||void 0===e?void 0:e.selectedInlineCompletion.get())||void 0===t?void 0:t.toSingleTextEdit(void 0)}),(e=>this.updateObservables(e,Oe.Other)),(e=>{(0,s.PS)((t=>{var i;this.updateObservables(t,Oe.Other),null===(i=this.model.get())||void 0===i||i.handleSuggestAccepted(e)}))}))),this._enabled=(0,s.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(62).enabled)),this.ghostTextWidget=this._register(this.instantiationService.createInstance(B,this.editor,{ghostText:this.model.map(((e,t)=>null===e||void 0===e?void 0:e.ghostText.read(t))),minReservedLineCount:(0,s.Dz)(0),targetTextModel:this.model.map((e=>null===e||void 0===e?void 0:e.textModel))})),this._debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(new l.f(this.contextKeyService,this.model)),this._register(c.ju.runAndSubscribe(e.onDidChangeModel,(()=>(0,s.PS)((i=>{this.model.set(void 0,i),this.updateObservables(i,Oe.Other);const n=e.getModel();if(n){const o=t.createInstance(Ve,n,this.suggestWidgetAdaptor.selectedItem,this.cursorPosition,this.textModelVersionId,this._debounceValue,(0,s.rD)(e.onDidChangeConfiguration,(()=>e.getOption(117).preview)),(0,s.rD)(e.onDidChangeConfiguration,(()=>e.getOption(117).previewMode)),(0,s.rD)(e.onDidChangeConfiguration,(()=>e.getOption(62).mode)),this._enabled);this.model.set(o,i)}})))));const f=e=>{var t;return e.isUndoing?Oe.Undo:e.isRedoing?Oe.Redo:(null===(t=this.model.get())||void 0===t?void 0:t.isAcceptingPartially)?Oe.AcceptWord:Oe.Other};let v;this._register(e.onDidChangeModelContent((e=>(0,s.PS)((t=>this.updateObservables(t,f(e))))))),this._register(e.onDidChangeCursorPosition((e=>(0,s.PS)((t=>{var i;this.updateObservables(t,Oe.Other),3!==e.reason&&"api"!==e.source||null===(i=this.model.get())||void 0===i||i.stop(t)}))))),this._register(e.onDidType((()=>(0,s.PS)((e=>{var t;this.updateObservables(e,Oe.Other),this._enabled.get()&&(null===(t=this.model.get())||void 0===t||t.trigger(e))}))))),this._register(this.commandService.onDidExecuteCommand((t=>{const i=new Set([h.wk.Tab.id,h.wk.DeleteLeft.id,h.wk.DeleteRight.id,a.Ou,"acceptSelectedSuggestion"]);i.has(t.commandId)&&e.hasTextFocus()&&this._enabled.get()&&(0,s.PS)((e=>{var t;null===(t=this.model.get())||void 0===t||t.trigger(e)}))}))),this._register(this.editor.onDidBlurEditorWidget((()=>{this.contextKeyService.getContextKeyValue("accessibleViewIsShown")||this.configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||Q.QG.dropDownVisible||(0,s.PS)((e=>{var t;null===(t=this.model.get())||void 0===t||t.stop(e)}))}))),this._register((0,s.EH)((e=>{var t;const i=null===(t=this.model.read(e))||void 0===t?void 0:t.state.read(e);(null===i||void 0===i?void 0:i.suggestItem)?i.ghostText.lineCount>=2&&this.suggestWidgetAdaptor.forceRenderingAbove():this.suggestWidgetAdaptor.stopForceRenderingAbove()}))),this._register((0,u.OF)((()=>{this.suggestWidgetAdaptor.stopForceRenderingAbove()}))),this._register((0,s.EH)((e=>{const t=this.model.read(e),i=null===t||void 0===t?void 0:t.state.read(e);if(t&&i&&i.inlineCompletion){if(i.inlineCompletion.semanticId!==v){v=i.inlineCompletion.semanticId;const e=t.textModel.getLineContent(i.ghostText.lineNumber);this.audioCueService.playAudioCue(Qe.y$.inlineSuggestion).then((()=>{this.editor.getOption(8)&&this.provideScreenReaderUpdate(i.ghostText.renderForScreenReader(e))}))}}else v=void 0}))),this._register(new Q.oU(this.editor,this.model,this.instantiationService)),this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this.configurationService.getValue("accessibility.verbosity.inlineCompletions")})}))),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this.configurationService.getValue("accessibility.verbosity.inlineCompletions")})}provideScreenReaderUpdate(e){const t=this.contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let n;!t&&i&&this.editor.getOption(147)&&(n=(0,Ye.NC)("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),n?(0,d.Z9)(e+", "+n):(0,d.Z9)(e)}updateObservables(e,t){var i,n;const o=this.editor.getModel();this.textModelVersionId.set(null!==(i=null===o||void 0===o?void 0:o.getVersionId())&&void 0!==i?i:-1,e,t),this.cursorPosition.set(null!==(n=this.editor.getPosition())&&void 0!==n?n:new g.L(1,1),e)}shouldShowHoverAt(e){var t;const i=null===(t=this.model.get())||void 0===t?void 0:t.ghostText.get();return!!i&&i.parts.some((t=>e.containsPosition(new g.L(i.lineNumber,t.column))))}shouldShowHoverAtViewZone(e){return this.ghostTextWidget.ownsViewZone(e)}};Xe.ID="editor.contrib.inlineCompletionsController",Xe=qe=Ze([Je(1,Ae.TG),Je(2,ze.i6),Je(3,$e.Ui),Je(4,De.H),Je(5,p.A),Je(6,m.p),Je(7,Qe.e7),Je(8,Ge.d)],Xe);var et=i(49864),tt=i(82693),it=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class nt extends n.R6{constructor(){super({id:nt.ID,label:Ye.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:ze.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}run(e,t){var i;return it(this,void 0,void 0,(function*(){const e=Xe.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.next()}))}}nt.ID=a.OW;class ot extends n.R6{constructor(){super({id:ot.ID,label:Ye.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:ze.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}run(e,t){var i;return it(this,void 0,void 0,(function*(){const e=Xe.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.previous()}))}}ot.ID=a.Np;class st extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:Ye.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:r.u.writable})}run(e,t){var i;return it(this,void 0,void 0,(function*(){const e=Xe.get(t);null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.triggerExplicitly()}))}}class rt extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:Ye.NC("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:ze.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:ze.Ao.and(r.u.writable,l.f.inlineSuggestionVisible)},menuOpts:[{menuId:tt.eH.InlineSuggestionToolbar,title:Ye.NC("acceptWord","Accept Word"),group:"primary",order:2}]})}run(e,t){var i;return it(this,void 0,void 0,(function*(){const e=Xe.get(t);yield null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i?void 0:i.acceptNextWord(e.editor)}))}}class at extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:Ye.NC("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:ze.Ao.and(r.u.writable,l.f.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:tt.eH.InlineSuggestionToolbar,title:Ye.NC("acceptLine","Accept Line"),group:"secondary",order:2}]})}run(e,t){var i;return it(this,void 0,void 0,(function*(){const e=Xe.get(t);yield null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i?void 0:i.acceptNextLine(e.editor)}))}}class lt extends n.R6{constructor(){super({id:a.Ou,label:Ye.NC("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:l.f.inlineSuggestionVisible,menuOpts:[{menuId:tt.eH.InlineSuggestionToolbar,title:Ye.NC("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:ze.Ao.and(l.f.inlineSuggestionVisible,r.u.tabMovesFocus.toNegated(),l.f.inlineSuggestionHasIndentationLessThanTabSize,et._y.Visible.toNegated(),r.u.hoverFocused.toNegated())}})}run(e,t){var i;return it(this,void 0,void 0,(function*(){const e=Xe.get(t);e&&(null===(i=e.model.get())||void 0===i||i.accept(e.editor),e.editor.focus())}))}}class dt extends n.R6{constructor(){super({id:dt.ID,label:Ye.NC("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:l.f.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}run(e,t){return it(this,void 0,void 0,(function*(){const e=Xe.get(t);(0,s.PS)((t=>{var i;null===(i=null===e||void 0===e?void 0:e.model.get())||void 0===i||i.stop(t)}))}))}}dt.ID="editor.action.inlineSuggest.hide";class ct extends tt.Ke{constructor(){super({id:ct.ID,title:Ye.NC("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:tt.eH.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:ze.Ao.equals("config.editor.inlineSuggest.showToolbar","always")})}run(e,t){return it(this,void 0,void 0,(function*(){const t=e.get($e.Ui),i=t.getValue("editor.inlineSuggest.showToolbar"),n="always"===i?"onHover":"always";t.updateValue("editor.inlineSuggest.showToolbar",n)}))}}ct.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var ut=i(2548),ht=i(81478),gt=i(92767),pt=i(55907),mt=i(6544),ft=i(38857),vt=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_t=function(e,t){return function(i,n){t(i,n,e)}};class Ct{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let bt=class{constructor(e,t,i,n,o,s){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=n,this._instantiationService=o,this._telemetryService=s,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Xe.get(this._editor);if(!t)return null;const i=e.target;if(8===i.type){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new o.YM(1e3,this,b.e.fromPositions(this._editor.getModel().validatePosition(n.positionBefore||n.position)),e.event.posx,e.event.posy,!1)}if(7===i.type&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1);if(6===i.type){const n=i.detail.mightBeForeignElement;if(n&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if("always"===this._editor.getOption(62).showToolbar)return[];const i=Xe.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new Ct(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new u.SL,n=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(e,n,i);const o=n.controller.model.get(),r=this._instantiationService.createInstance(Q.QG,this._editor,!1,(0,s.Dz)(null),o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.selectedInlineCompletion.map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]})));return e.fragment.appendChild(r.getDomNode()),o.triggerExplicitly(),i.add(r),i}renderScreenReaderText(e,t,i){const n=ut.$,o=n("div.hover-row.markdown-hover"),r=ut.R3(o,n("div.hover-contents",{["aria-live"]:"assertive"})),a=i.add(new gt.$({editor:this._editor},this._languageService,this._openerService)),l=t=>{i.add(a.onDidRenderAsync((()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()})));const n=Ye.NC("inlineSuggestionFollows","Suggestion:"),o=i.add(a.render((new ht.W5).appendText(n).appendCodeblock("text",t)));r.replaceChildren(o.element)};i.add((0,s.EH)((e=>{var i;const n=null===(i=t.controller.model.read(e))||void 0===i?void 0:i.ghostText.read(e);if(n){const e=this._editor.getModel().getLineContent(n.lineNumber);l(n.renderForScreenReader(e))}else ut.mc(r)}))),e.fragment.appendChild(o)}};bt=vt([_t(1,w.O),_t(2,mt.v4),_t(3,pt.F),_t(4,Ae.TG),_t(5,ft.b)],bt),(0,n._K)(Xe.ID,Xe,3),(0,n.Qr)(st),(0,n.Qr)(nt),(0,n.Qr)(ot),(0,n.Qr)(rt),(0,n.Qr)(at),(0,n.Qr)(lt),(0,n.Qr)(dt),(0,tt.r1)(ct),o.Ae.register(bt)},70955:(e,t,i)=>{i.d(t,{QG:()=>A,oU:()=>O});var n,o=i(2548),s=i(32487),r=i(64347),a=i(10205),l=i(21921),d=i(85398),c=i(8419),u=i(70959),h=i(40164),g=i(47606),p=i(99588),m=i(89999),f=i(67026),v=i(34665),_=i(25206),C=i(94700),b=i(40251),S=i(82693),w=i(46871),x=i(37174),y=i(93753),L=i(21881),N=i(15285),I=i(38857),M=i(98158),T=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},R=function(e,t){return function(i,n){t(i,n,e)}};let O=class extends u.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,h.rD)(this.editor.onDidChangeConfiguration,(()=>"always"===this.editor.getOption(62).showToolbar)),this.sessionPosition=void 0,this.position=(0,h.nK)(this,(e=>{var t,i,n;const o=null===(t=this.model.read(e))||void 0===t?void 0:t.ghostText.read(e);if(!this.alwaysShowToolbar.read(e)||!o||0===o.parts.length)return this.sessionPosition=void 0,null;const s=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const r=new m.L(o.lineNumber,Math.min(s,null!==(n=null===(i=this.sessionPosition)||void 0===i?void 0:i.column)&&void 0!==n?n:Number.MAX_SAFE_INTEGER));return this.sessionPosition=r,r})),this._register((0,h.gp)(((t,i)=>{const n=this.model.read(t);if(!n||!this.alwaysShowToolbar.read(t))return;const o=i.add(this.instantiationService.createInstance(A,this.editor,!0,this.position,n.selectedInlineCompletionIndex,n.inlineCompletionsCount,n.selectedInlineCompletion.map((e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.inlineCompletion.source.inlineCompletions.commands)&&void 0!==t?t:[]}))));e.addContentWidget(o),i.add((0,u.OF)((()=>e.removeContentWidget(o)))),i.add((0,h.EH)((e=>{const t=this.position.read(e);t&&n.lastTriggerKind.read(e)!==f.bw.Explicit&&n.triggerExplicitly()})))})))}};O=T([R(2,L.TG)],O);const P=(0,M.q5)("inline-suggestion-hints-next",c.l.chevronRight,(0,_.NC)("parameterHintsNextIcon","Icon for show next parameter hint.")),D=(0,M.q5)("inline-suggestion-hints-previous",c.l.chevronLeft,(0,_.NC)("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let A=n=class extends u.JT{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const n=new a.aU(e,t,i,!0,(()=>this._commandService.executeCommand(e))),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let s=t;return o&&(s=(0,_.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),n.tooltip=s,n}constructor(e,t,i,s,r,c,u,g,m,f,C){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=s,this._suggestionCount=r,this._extraCommands=c,this._commandService=u,this.keybindingService=m,this._contextKeyService=f,this._menuService=C,this.id="InlineSuggestionHintsContentWidget"+n.id++,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,o.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,o.h)("div@toolBar")]),this.previousAction=this.createCommandAction(v.Np,(0,_.NC)("previous","Previous"),p.k.asClassName(D)),this.availableSuggestionCountAction=new a.aU("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(v.OW,(0,_.NC)("next","Next"),p.k.asClassName(P)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(S.eH.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new d.pY((()=>{this.availableSuggestionCountAction.label=""}),100)),this.disableButtonsDebounced=this._register(new d.pY((()=>{this.previousAction.enabled=this.nextAction.enabled=!1}),100)),this.lastCommands=[],this.toolBar=this._register(g.createInstance(F,this.nodes.toolBar,S.eH.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},actionViewItemProvider:(e,t)=>{if(e instanceof S.U8)return g.createInstance(k,e,void 0);if(e===this.availableSuggestionCountAction){const t=new E(void 0,e,{label:!0,icon:!1});return t.setClass("availableSuggestionCount"),t}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility((e=>{n._dropDownVisible=e}))),this._register((0,h.EH)((e=>{this._position.read(e),this.editor.layoutContentWidget(this)}))),this._register((0,h.EH)((e=>{const t=this._suggestionCount.read(e),i=this._currentSuggestionIdx.read(e);void 0!==t?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${i+1}/${t}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),void 0!==t&&t>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()}))),this._register((0,h.EH)((e=>{const t=this._extraCommands.read(e);if((0,l.fS)(this.lastCommands,t))return;this.lastCommands=t;const i=t.map((e=>({class:void 0,id:e.id,enabled:!0,tooltip:e.tooltip||"",label:e.title,run:t=>this._commandService.executeCommand(e.id)})));for(const[n,o]of this.inlineCompletionsActionsMenus.getActions())for(const e of o)e instanceof S.U8&&i.push(e);i.length>0&&i.unshift(new a.Z0),this.toolBar.setAdditionalSecondaryActions(i)})))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};A._dropDownVisible=!1,A.id=0,A=n=T([R(6,w.H),R(7,L.TG),R(8,N.d),R(9,x.i6),R(10,S.co)],A);class E extends s.gU{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}}class k extends C.Mm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=(0,o.h)("div.keybinding").root,i=new r.e(t,g.OS,Object.assign({disableTitle:!0},r.F));i.set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}}let F=class extends b.T{constructor(e,t,i,n,o,s,r,a){super(e,Object.assign({resetMenu:t},i),n,o,s,r,a),this.menuId=t,this.options2=i,this.menuService=n,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange((()=>this.updateToolbar()))),this.updateToolbar()}updateToolbar(){var e,t,i,n,o,s,r;const a=[],l=[];(0,C.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:a,secondary:l},null===(i=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(o=null===(n=this.options2)||void 0===n?void 0:n.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(r=null===(s=this.options2)||void 0===s?void 0:s.toolbarOptions)||void 0===r?void 0:r.useSeparatorsInPrimaryActions),l.push(...this.additionalActions),a.unshift(...this.prependedPrimaryActions),this.setActions(a,l)}setPrependedPrimaryActions(e){(0,l.fS)(this.prependedPrimaryActions,e,((e,t)=>e===t))||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){(0,l.fS)(this.additionalActions,e,((e,t)=>e===t))||(this.additionalActions=e,this.updateToolbar())}};F=T([R(3,S.co),R(4,x.i6),R(5,y.i),R(6,N.d),R(7,I.b)],F)},44737:(e,t,i)=>{i.d(t,{r:()=>v});var n=i(2548),o=i(85398),s=i(8419),r=i(70959),a=i(61720),l=i(99588),d=i(33162),c=i(16375),u=i(21881),h=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t){return function(i,n){t(i,n,e)}},p=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const m=c.qx.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:a.B4,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class f extends r.JT{constructor(e,t,i,n,o){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(n),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=n.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=n.$("span.icon");this.domNode.append(t),t.classList.add(...l.k.asClassNameArray(s.l.loading),"codicon-modifier-spin");const i=()=>{const e=this.editor.getOption(66);this.domNode.style.height=`${e}px`,this.domNode.style.width=`${Math.ceil(.8*e)}px`};i(),this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(52)||e.hasChanged(66))&&i()}))),this._register(n.nm(this.domNode,n.tw.CLICK,(e=>{this.delegate.cancel()})))}getId(){return f.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}f.baseId="editor.widget.inlineProgressWidget";let v=class extends r.JT{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new r.XK),this._currentWidget=new r.XK,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}showWhile(e,t,i){return p(this,void 0,void 0,(function*(){const n=this._operationIdPool++;this._currentOperation=n,this.clear(),this._showPromise.value=(0,o.Vg)((()=>{const n=d.e.fromPositions(e),o=this._currentDecorations.set([{range:n,options:m}]);o.length>0&&(this._currentWidget.value=this._instantiationService.createInstance(f,this.id,this._editor,n,t,i))}),this._showDelay);try{return yield i}finally{this._currentOperation===n&&(this.clear(),this._currentOperation=void 0)}}))}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};v=h([g(2,u.TG)],v)},41287:(e,t,i)=>{var n=i(48077),o=i(55880),s=i(44950),r=i(25206);class a extends n.R6{constructor(){super({id:"expandLineSelection",label:r.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:s.u.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,o.P.expandLineSelection(n,n.getCursorStates())),n.revealPrimaryCursor(i.source,!0)}}(0,n.Qr)(a)},90376:(e,t,i)=>{var n=i(56082),o=i(25109),s=i(48077),r=i(74816),a=i(38159),l=i(51491),d=i(90970),c=i(89999),u=i(33162),h=i(54644),g=i(44950);class p{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=[];for(let s=i.startLineNumber;s<=i.endLineNumber;s++)n.push(e.getLineContent(s));const o=n.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new u.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new u.e(i.startLineNumber,1,i.startLineNumber,1),o+"\n"):t.addEditOperation(new u.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=i.startLineNumber,t=i.startColumn,n=i.endLineNumber,o=i.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(n+=this._endLineNumberDelta,o=1),i=h.Y.createWithDirection(e,t,n,o,this._selectionDirection)}return i}}var m=i(61720),f=i(85175),v=i(11432),_=i(97297),C=i(28649),b=i(52185),S=i(74177),w=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},x=function(e,t){return function(i,n){t(i,n,e)}};let y=class{constructor(e,t,i,n){this._languageConfigurationService=n,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:o,indentSize:s,insertSpaces:r}=e.getOptions(),a=this.buildIndentConverter(o,s,r),l={tokenization:{getLineTokens:t=>e.tokenization.getLineTokens(t),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i)},getLineContent:null};if(n.startLineNumber===n.endLineNumber&&1===e.getLineMaxColumn(n.startLineNumber)){const i=n.startLineNumber,o=this._isMovingDown?i+1:i-1;1===e.getLineMaxColumn(o)?t.addEditOperation(new u.e(1,1,1,1),null):(t.addEditOperation(new u.e(i,1,i,1),e.getLineContent(o)),t.addEditOperation(new u.e(o,1,o,e.getLineMaxColumn(o)),null)),n=new h.Y(o,1,o,1)}else{let i,s;if(this._isMovingDown){i=n.endLineNumber+1,s=e.getLineContent(i),t.addEditOperation(new u.e(i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let d=s;if(this.shouldAutoIndent(e,n)){const c=this.matchEnterRule(e,a,o,i,n.startLineNumber-1);if(null!==c){const t=m.V8(e.getLineContent(i)),n=c+C.Y(t,o),a=C.J(n,o,r);d=a+this.trimStart(s)}else{l.getLineContent=t=>t===n.startLineNumber?e.getLineContent(i):e.getLineContent(t);const t=(0,b.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber,a,this._languageConfigurationService);if(null!==t){const n=m.V8(e.getLineContent(i)),a=C.Y(t,o),l=C.Y(n,o);if(a!==l){const e=C.J(a,o,r);d=e+this.trimStart(s)}}}t.addEditOperation(new u.e(n.startLineNumber,1,n.startLineNumber,1),d+"\n");const h=this.matchEnterRuleMovingDown(e,a,o,n.startLineNumber,i,d);if(null!==h)0!==h&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,h);else{l.getLineContent=t=>t===n.startLineNumber?d:t>=n.startLineNumber+1&&t<=n.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);const s=(0,b.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber+1,a,this._languageConfigurationService);if(null!==s){const i=m.V8(e.getLineContent(n.startLineNumber)),a=C.Y(s,o),l=C.Y(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}else t.addEditOperation(new u.e(n.startLineNumber,1,n.startLineNumber,1),d+"\n")}else if(i=n.startLineNumber-1,s=e.getLineContent(i),t.addEditOperation(new u.e(i,1,i+1,1),null),t.addEditOperation(new u.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+s),this.shouldAutoIndent(e,n)){l.getLineContent=t=>t===i?e.getLineContent(n.startLineNumber):e.getLineContent(t);const s=this.matchEnterRule(e,a,o,n.startLineNumber,n.startLineNumber-2);if(null!==s)0!==s&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,s);else{const s=(0,b.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(n.startLineNumber,1),i,a,this._languageConfigurationService);if(null!==s){const i=m.V8(e.getLineContent(n.startLineNumber)),a=C.Y(s,o),l=C.Y(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>f.U.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>f.U.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let s=o.indentation;o.indentAction===v.wU.None||o.indentAction===v.wU.Indent?s=o.indentation+o.appendText:o.indentAction===v.wU.IndentOutdent?s=o.indentation:o.indentAction===v.wU.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);const r=e.getLineContent(n);if(this.trimStart(r).indexOf(this.trimStart(s))>=0){const o=m.V8(e.getLineContent(n));let r=m.V8(s);const a=(0,b.tI)(e,n,this._languageConfigurationService);null!==a&&2&a&&(r=t.unshiftIndent(r));const l=C.Y(r,i),d=C.Y(o,i);return l-d}}return null}matchEnterRuleMovingDown(e,t,i,n,o,s){if(m.ow(s)>=0){const s=e.getLineMaxColumn(o),r=(0,S.A)(this._autoIndent,e,new u.e(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,r)}{let o=n-1;while(o>=1){const t=e.getLineContent(o),i=m.ow(t);if(i>=0)break;o--}if(o<1||n>e.getLineCount())return null;const s=e.getLineMaxColumn(o),r=(0,S.A)(this._autoIndent,e,new u.e(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,r)}}matchEnterRule(e,t,i,n,o,s){let r=o;while(r>=1){let t;t=r===o&&void 0!==s?s:e.getLineContent(r);const i=m.ow(t);if(i>=0)break;r--}if(r<1||n>e.getLineCount())return null;const a=e.getLineMaxColumn(r),l=(0,S.A)(this._autoIndent,e,new u.e(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,l)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return i===n&&null!==this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport}getIndentEditsOfMovingBlock(e,t,i,n,o,s){for(let r=i.startLineNumber;r<=i.endLineNumber;r++){const a=e.getLineContent(r),l=m.V8(a),d=C.Y(l,n),c=d+s,h=C.J(c,n,o);h!==l&&(t.addEditOperation(new u.e(r,1,r,l.length+1),h),r===i.endLineNumber&&i.endColumn<=l.length+1&&""===h&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};y=w([x(3,_.c_)],y);class L{static getCollator(){return L._COLLATOR||(L._COLLATOR=new Intl.Collator),L._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=I(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(null===e)return!1;const n=N(e,t,i);if(!n)return!1;for(let o=0,s=n.before.length;o<s;o++)if(n.before[o]!==n.after[o])return!0;return!1}}function N(e,t,i){const n=t.startLineNumber;let o=t.endLineNumber;if(1===t.endColumn&&o--,n>=o)return null;const s=[];for(let a=n;a<=o;a++)s.push(e.getLineContent(a));let r=s.slice(0);return r.sort(L.getCollator().compare),!0===i&&(r=r.reverse()),{startLineNumber:n,endLineNumber:o,before:s,after:r}}function I(e,t,i){const n=N(e,t,i);return n?d.h.replace(new u.e(n.startLineNumber,1,n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),n.after.join("\n")):null}L._COLLATOR=null;var M=i(25206),T=i(82693);class R extends s.R6{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map(((e,t)=>({selection:e,index:t,ignore:!1})));i.sort(((e,t)=>u.e.compareRangesUsingStarts(e.selection,t.selection)));let n=i[0];for(let s=1;s<i.length;s++){const e=i[s];n.selection.endLineNumber===e.selection.startLineNumber&&(n.index<e.index?e.ignore=!0:(n.ignore=!0,n=e))}const o=[];for(const s of i)o.push(new p(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class O extends R{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:M.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class P extends R{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:M.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class D extends s.R6{constructor(){super({id:"editor.action.duplicateSelection",label:M.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:g.u.writable,menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],o=t.getSelections(),s=t.getModel();for(const a of o)if(a.isEmpty())n.push(new p(a,!0));else{const e=new h.Y(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new r.OY(e,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class A extends s.R6{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(_.c_),n=[],o=t.getSelections()||[],s=t.getOption(12);for(const r of o)n.push(new y(r,this.down,s,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class E extends A{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:M.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class k extends A{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:M.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class F extends s.R6{constructor(e,t){super(t),this.descending=e}run(e,t){const i=t.getSelections()||[];for(const o of i)if(!L.canRun(t.getModel(),o,this.descending))return;const n=[];for(let o=0,s=i.length;o<s;o++)n[o]=new L(i[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class V extends F{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:M.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:g.u.writable})}}class H extends F{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:M.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:g.u.writable})}}class W extends s.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:M.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:g.u.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(1===i.getLineCount()&&1===i.getLineMaxColumn(1))return;const n=[],o=[];let s=0;for(const r of t.getSelections()){const e=new Set,t=[];for(let n=r.startLineNumber;n<=r.endLineNumber;n++){const o=i.getLineContent(n);e.has(o)||(t.push(o),e.add(o))}const a=new h.Y(r.startLineNumber,1,r.endLineNumber,i.getLineMaxColumn(r.endLineNumber)),l=r.startLineNumber-s,c=new h.Y(l,1,l+t.length-1,t[t.length-1].length);n.push(d.h.replace(a,t.join("\n"))),o.push(c),s+=r.endLineNumber-r.startLineNumber+1-t.length}t.pushUndoStop(),t.executeEdits(this.id,n,o),t.pushUndoStop()}}class U extends s.R6{constructor(){super({id:U.ID,label:M.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:(0,n.gx)(2089,2102),weight:100}})}run(e,t,i){let n=[];"auto-save"===i.reason&&(n=(t.getSelections()||[]).map((e=>new c.L(e.positionLineNumber,e.positionColumn))));const o=t.getSelection();if(null===o)return;const s=new a.V(o,n);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}}U.ID="editor.action.trimTrailingWhitespace";class K extends s.R6{constructor(){super({id:"editor.action.deleteLines",label:M.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;let o=0;const s=[],r=[];for(let a=0,l=i.length;a<l;a++){const e=i[a];let t=e.startLineNumber,l=e.endLineNumber,c=1,u=n.getLineMaxColumn(l);l<n.getLineCount()?(l+=1,u=1):t>1&&(t-=1,c=n.getLineMaxColumn(t)),s.push(d.h.replace(new h.Y(t,c,l,u),"")),r.push(new h.Y(t-o,e.positionColumn,t-o,e.positionColumn)),o+=e.endLineNumber-e.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,r),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map((e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort(((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber));const i=[];let n=t[0];for(let o=1;o<t.length;o++)n.endLineNumber+1>=t[o].startLineNumber?n.endLineNumber=t[o].endLineNumber:(i.push(n),n=t[o]);return i.push(n),i}}class B extends s.R6{constructor(){super({id:"editor.action.indentLines",label:M.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class j extends s.R6{constructor(){super({id:"editor.action.outdentLines",label:M.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2140,weight:100}})}run(e,t){o.wk.Outdent.runEditorCommand(e,t,null)}}class q extends s.R6{constructor(){super({id:"editor.action.insertLineBefore",label:M.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class Y extends s.R6{constructor(){super({id:"editor.action.insertLineAfter",label:M.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class Q extends s.R6{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),n=this._getRangesToDelete(t),o=[];for(let a=0,l=n.length-1;a<l;a++){const e=n[a],t=n[a+1];null===u.e.intersectRanges(e,t)?o.push(e):n[a+1]=u.e.plusRange(e,t)}o.push(n[n.length-1]);const s=this._getEndCursorState(i,o),r=o.map((e=>d.h.replace(e,"")));t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}}class $ extends Q{constructor(){super({id:"deleteAllLeft",label:M.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];let o=0;return t.forEach((t=>{let s;if(1===t.endColumn&&o>0){const e=t.startLineNumber-o;s=new h.Y(e,t.startColumn,e,t.startColumn)}else s=new h.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?i=s:n.push(s)})),i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getSelections();if(null===t)return[];let i=t;const n=e.getModel();return null===n?[]:(i.sort(u.e.compareRangesUsingStarts),i=i.map((e=>{if(e.isEmpty()){if(1===e.startColumn){const t=Math.max(1,e.startLineNumber-1),i=1===e.startLineNumber?1:n.getLineLength(t)+1;return new u.e(t,i,e.startLineNumber,1)}return new u.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new u.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),i)}}class z extends Q{constructor(){super({id:"deleteAllRight",label:M.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];for(let o=0,s=t.length,r=0;o<s;o++){const s=t[o],a=new h.Y(s.startLineNumber-r,s.startColumn,s.startLineNumber-r,s.startColumn);s.intersectRanges(e)?i=a:n.push(a)}return i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getModel();if(null===t)return[];const i=e.getSelections();if(null===i)return[];const n=i.map((e=>{if(e.isEmpty()){const i=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===i?new u.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new u.e(e.startLineNumber,e.startColumn,e.startLineNumber,i)}return e}));return n.sort(u.e.compareRangesUsingStarts),n}}class G extends s.R6{constructor(){super({id:"editor.action.joinLines",label:M.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(null===i)return;let n=t.getSelection();if(null===n)return;i.sort(u.e.compareRangesUsingStarts);const o=[],s=i.reduce(((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(n.equalsSelection(e)&&(n=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new h.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new h.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)));o.push(s);const r=t.getModel();if(null===r)return;const a=[],l=[];let c=n,g=0;for(let p=0,m=o.length;p<m;p++){const e=o[p],t=e.startLineNumber,i=1;let s,m,f=0;const v=r.getLineLength(e.endLineNumber)-e.endColumn;if(e.isEmpty()||e.startLineNumber===e.endLineNumber){const i=e.getStartPosition();i.lineNumber<r.getLineCount()?(s=t+1,m=r.getLineMaxColumn(s)):(s=i.lineNumber,m=r.getLineMaxColumn(i.lineNumber))}else s=e.endLineNumber,m=r.getLineMaxColumn(s);let _=r.getLineContent(t);for(let n=t+1;n<=s;n++){const e=r.getLineContent(n),t=r.getLineFirstNonWhitespaceColumn(n);if(t>=1){let i=!0;""===_&&(i=!1),!i||" "!==_.charAt(_.length-1)&&"\t"!==_.charAt(_.length-1)||(i=!1,_=_.replace(/[\s\uFEFF\xA0]+$/g," "));const n=e.substr(t-1);_+=(i?" ":"")+n,f=i?n.length+1:n.length}else f=0}const C=new u.e(t,i,s,m);if(!C.isEmpty()){let i;e.isEmpty()?(a.push(d.h.replace(C,_)),i=new h.Y(C.startLineNumber-g,_.length-f+1,t-g,_.length-f+1)):e.startLineNumber===e.endLineNumber?(a.push(d.h.replace(C,_)),i=new h.Y(e.startLineNumber-g,e.startColumn,e.endLineNumber-g,e.endColumn)):(a.push(d.h.replace(C,_)),i=new h.Y(e.startLineNumber-g,e.startColumn,e.startLineNumber-g,_.length-v)),null!==u.e.intersectRanges(C,n)?c=i:l.push(i)}g+=C.endLineNumber-C.startLineNumber}l.unshift(c),t.pushUndoStop(),t.executeEdits(this.id,a,l),t.pushUndoStop()}}class Z extends s.R6{constructor(){super({id:"editor.action.transpose",label:M.NC("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:g.u.writable})}run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=[];for(let s=0,a=i.length;s<a;s++){const e=i[s];if(!e.isEmpty())continue;const t=e.getStartPosition(),a=n.getLineMaxColumn(t.lineNumber);if(t.column>=a){if(t.lineNumber===n.getLineCount())continue;const e=new u.e(t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new r.T4(new h.Y(t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i))}else{const e=new u.e(t.lineNumber,Math.max(1,t.column-1),t.lineNumber,t.column+1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new r.hP(e,i,new h.Y(t.lineNumber,t.column+1,t.lineNumber,t.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class J extends s.R6{run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=t.getOption(129),s=[];for(const r of i)if(r.isEmpty()){const e=r.getStartPosition(),i=t.getConfiguredWordAtPosition(e);if(!i)continue;const a=new u.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),l=n.getValueInRange(a);s.push(d.h.replace(a,this._modifyText(l,o)))}else{const e=n.getValueInRange(r);s.push(d.h.replace(r,this._modifyText(e,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}class X extends J{constructor(){super({id:"editor.action.transformToUppercase",label:M.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:g.u.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class ee extends J{constructor(){super({id:"editor.action.transformToLowercase",label:M.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:g.u.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class te{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}}class ie extends J{constructor(){super({id:"editor.action.transformToTitlecase",label:M.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:g.u.writable})}_modifyText(e,t){const i=ie.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,(e=>e.toLocaleUpperCase())):e}}ie.titleBoundary=new te("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class ne extends J{constructor(){super({id:"editor.action.transformToSnakecase",label:M.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:g.u.writable})}_modifyText(e,t){const i=ne.caseBoundary.get(),n=ne.singleLetters.get();return i&&n?e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase():e}}ne.caseBoundary=new te("(\\p{Ll})(\\p{Lu})","gmu"),ne.singleLetters=new te("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class oe extends J{constructor(){super({id:"editor.action.transformToCamelcase",label:M.NC("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:g.u.writable})}_modifyText(e,t){const i=oe.wordBoundary.get();if(!i)return e;const n=e.split(i),o=n.shift();return o+n.map((e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1))).join("")}}oe.wordBoundary=new te("[_\\s-]","gm");class se extends J{static isSupported(){const e=[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((e=>e.isSupported()));return e}constructor(){super({id:"editor.action.transformToKebabcase",label:M.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:g.u.writable})}_modifyText(e,t){const i=se.caseBoundary.get(),n=se.singleLetters.get(),o=se.underscoreBoundary.get();return i&&n&&o?e.replace(o,"$1-$3").replace(i,"$1-$2").replace(n,"$1-$2").toLocaleLowerCase():e}}se.caseBoundary=new te("(\\p{Ll})(\\p{Lu})","gmu"),se.singleLetters=new te("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),se.underscoreBoundary=new te("(\\S)(_)(\\S)","gm"),(0,s.Qr)(O),(0,s.Qr)(P),(0,s.Qr)(D),(0,s.Qr)(E),(0,s.Qr)(k),(0,s.Qr)(V),(0,s.Qr)(H),(0,s.Qr)(W),(0,s.Qr)(U),(0,s.Qr)(K),(0,s.Qr)(B),(0,s.Qr)(j),(0,s.Qr)(q),(0,s.Qr)(Y),(0,s.Qr)($),(0,s.Qr)(z),(0,s.Qr)(G),(0,s.Qr)(Z),(0,s.Qr)(X),(0,s.Qr)(ee),ne.caseBoundary.isSupported()&&ne.singleLetters.isSupported()&&(0,s.Qr)(ne),oe.wordBoundary.isSupported()&&(0,s.Qr)(oe),ie.titleBoundary.isSupported()&&(0,s.Qr)(ie),se.isSupported()&&(0,s.Qr)(se)},69225:(e,t,i)=>{var n,o=i(21921),s=i(85398),r=i(55191),a=i(60204),l=i(98642),d=i(11271),c=i(70959),u=i(61720),h=i(95896),g=i(48077),p=i(35195),m=i(89999),f=i(33162),v=i(44950),_=i(16375),C=i(97297),b=i(25206),S=i(37174),w=i(16458),x=i(47277),y=i(54732),L=i(96729),N=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,n){t(i,n,e)}},M=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const T=new S.uy("LinkedEditingInputVisible",!1),R="linked-editing-decoration";let O=n=class extends c.JT{static get(e){return e.getContribution(n.ID)}constructor(e,t,i,n,o){super(),this.languageConfigurationService=n,this._syncRangesToken=0,this._localToDispose=this._register(new c.SL),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=T.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new c.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(69)||e.hasChanged(92))&&this.reinitialize(!1)}))),this._register(this._providers.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=null!==t&&(this._editor.getOption(69)||this._editor.getOption(92))&&this._providers.has(t);if(i===this._enabled&&!e)return;if(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||null===t)return;this._localToDispose.add(d.ju.runAndSubscribe(t.onDidChangeLanguageConfiguration,(()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()})));const n=new s.vp(this._debounceInformation.get(t)),o=()=>{var e;this._rangeUpdateTriggerPromise=n.trigger((()=>this.updateRanges()),null!==(e=this._debounceDuration)&&void 0!==e?e:this._debounceInformation.get(t))},r=new s.vp(0),a=e=>{this._rangeSyncTriggerPromise=r.trigger((()=>this._syncRanges(e)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const t=this._currentDecorations.getRange(0);if(t&&e.changes.every((e=>t.intersectRanges(e.range))))return void a(this._syncRangesToken)}o()}))),this._localToDispose.add({dispose:()=>{n.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||0===this._currentDecorations.length)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const e=n.match(this._currentWordPattern),t=e?e[0].length:0;if(t!==n.length)return this.clearRanges()}const o=[];for(let s=1,r=this._currentDecorations.length;s<r;s++){const e=this._currentDecorations.getRange(s);if(e)if(e.startLineNumber!==e.endLineNumber)o.push({range:e,text:n});else{let i=t.getValueInRange(e),s=n,r=e.startColumn,a=e.endColumn;const l=u.Mh(i,s);r+=l,i=i.substr(l),s=s.substr(l);const d=u.P1(i,s);a-=d,i=i.substr(0,i.length-d),s=s.substr(0,s.length-d),r===a&&0===s.length||o.push({range:new f.e(e.startLineNumber,r,e.endLineNumber,a),text:s})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return M(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1)return void this.clearRanges();const i=this._editor.getModel(),o=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===o){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const e=this._currentDecorations.getRange(0);if(e&&e.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=o;const r=(0,s.PG)((e=>M(this,void 0,void 0,(function*(){try{const s=new L.G(!1),a=yield A(this._providers,i,t,e);if(this._debounceInformation.update(i,s.elapsed()),r!==this._currentRequest)return;if(this._currentRequest=null,o!==i.getVersionId())return;let l=[];(null===a||void 0===a?void 0:a.ranges)&&(l=a.ranges),this._currentWordPattern=(null===a||void 0===a?void 0:a.wordPattern)||this._languageWordPattern;let d=!1;for(let e=0,i=l.length;e<i;e++)if(f.e.containsPosition(l[e],t)){if(d=!0,0!==e){const t=l[e];l.splice(e,1),l.unshift(t)}break}if(!d)return void this.clearRanges();const c=l.map((e=>({range:e,options:n.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations.set(c),this._syncRangesToken++}catch(s){(0,l.n2)(s)||(0,l.dL)(s),this._currentRequest!==r&&this._currentRequest||this.clearRanges()}}))));return this._currentRequest=r,r}))}};O.ID="editor.contrib.linkedEditing",O.DECORATION=_.qx.register({description:"linked-editing",stickiness:0,className:R}),O=n=N([I(1,S.i6),I(2,w.p),I(3,C.c_),I(4,y.A)],O);class P extends g.R6{constructor(){super({id:"editor.action.linkedEditing",label:b.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:S.Ao.and(v.u.writable,v.u.hasRenameProvider),kbOpts:{kbExpr:v.u.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(p.$),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return h.o.isUri(n)&&m.L.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),l.dL):super.runCommand(e,t)}run(e,t){const i=O.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const D=g._l.bindToContribution(O.get);function A(e,t,i,n){const r=e.ordered(t);return(0,s.Ps)(r.map((e=>()=>M(this,void 0,void 0,(function*(){try{return yield e.provideLinkedEditingRanges(t,i,n)}catch(o){return void(0,l.Cp)(o)}})))),(e=>!!e&&o.Of(null===e||void 0===e?void 0:e.ranges)))}(0,g.fK)(new D({id:"cancelLinkedEditingInput",precondition:T,handler:e=>e.clearRanges(),kbOpts:{kbExpr:v.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));(0,x.P6G)("editor.linkedEditingBackground",{dark:a.Il.fromHex("#f00").transparent(.3),light:a.Il.fromHex("#f00").transparent(.3),hcDark:a.Il.fromHex("#f00").transparent(.3),hcLight:a.Il.white},b.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,g.sb)("_executeLinkedEditingProvider",((e,t,i)=>{const{linkedEditingRangeProvider:n}=e.get(w.p);return A(n,t,i,r.T.None)})),(0,g._K)(O.ID,O,1),(0,g.Qr)(P)},86898:(e,t,i)=>{var n=i(70959),o=i(48077);class s extends n.JT{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown((e=>{const t=this._editor.getOption(116);t>=0&&6===e.target.type&&e.target.position.column>=t&&this._editor.updateOptions({stopRenderingLineAfter:-1})})))}}s.ID="editor.contrib.longLinesHelper",(0,o._K)(s.ID,s,2)},92767:(e,t,i)=>{i.d(t,{$:()=>v,N:()=>_});var n,o=i(8182),s=i(82168),r=i(98642),a=i(11271),l=i(70959),d=i(6155),c=i(61141),u=i(32484),h=i(50960),g=i(6544),p=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,n){t(i,n,e)}},f=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let v=n=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new a.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){const e=document.createElement("span");return{element:e,dispose:()=>{}}}const n=new l.SL,s=n.add((0,o.ap)(e,Object.assign(Object.assign({},this._getRenderOptions(e,n)),t),i));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>n.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:(e,t)=>f(this,void 0,void 0,(function*(){var i,o,s;let r;e?r=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(r=null===(i=this._options.editor.getModel())||void 0===i?void 0:i.getLanguageId()),r||(r=u.bd);const a=yield(0,h.C2)(this._languageService,t,r),l=document.createElement("span");if(l.innerHTML=null!==(s=null===(o=n._ttpTokenizer)||void 0===o?void 0:o.createHTML(a))&&void 0!==s?s:a,this._options.editor){const e=this._options.editor.getOption(50);(0,d.N)(l,e)}else this._options.codeBlockFontFamily&&(l.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(l.style.fontSize=this._options.codeBlockFontSize),l})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:t=>_(this._openerService,t,e.isTrusted),disposables:t}}}};function _(e,t,i){return f(this,void 0,void 0,(function*(){try{return yield e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:C(i)})}catch(n){return(0,r.dL)(n),!1}}))}function C(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}v._ttpTokenizer=(0,s.Z)("tokenizeToString",{createHTML(e){return e}}),v=n=p([m(1,c.O),m(2,g.v4)],v)},11898:(e,t,i)=>{i.d(t,{O:()=>_});var n,o=i(8182),s=i(69332),r=i(11271),a=i(81478),l=i(70959),d=i(48077),c=i(33162),u=i(92767),h=i(25206),g=i(37174),p=i(6544),m=i(2548),f=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},v=function(e,t){return function(i,n){t(i,n,e)}};let _=n=class{static get(e){return e.getContribution(n.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new l.XK,this._messageListeners=new l.SL,this._mouseOverMessage=!1,this._editor=e,this._visible=n.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;null===(e=this._message)||void 0===e||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,s.Z9)((0,a.Fr)(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=(0,a.Fr)(e)?(0,o.ap)(e,{actionHandler:{callback:t=>(0,u.N)(this._openerService,t,(0,a.Fr)(e)?e.isTrusted:void 0),disposables:this._messageListeners}}):void 0,this._messageWidget.value=new b(this._editor,t,"string"===typeof e?e:this._message.element),this._messageListeners.add(r.ju.debounce(this._editor.onDidBlurEditorText,((e,t)=>t),0)((()=>{this._mouseOverMessage||this._messageWidget.value&&m.jg(m.vY(),this._messageWidget.value.getDomNode())||this.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(m.nm(this._messageWidget.value.getDomNode(),m.tw.MOUSE_ENTER,(()=>this._mouseOverMessage=!0),!0)),this._messageListeners.add(m.nm(this._messageWidget.value.getDomNode(),m.tw.MOUSE_LEAVE,(()=>this._mouseOverMessage=!1),!0)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new c.e(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(b.fadeOut(this._messageWidget.value))}};_.ID="editor.contrib.messageController",_.MESSAGE_VISIBLE=new g.uy("messageVisible",!1,h.NC("messageVisible","Whether the editor is currently showing an inline message")),_=n=f([v(1,g.i6),v(2,p.v4)],_);const C=d._l.bindToContribution(_.get);(0,d.fK)(new C({id:"leaveEditorMessage",precondition:_.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class b{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const s=document.createElement("div");"string"===typeof n?(s.classList.add("message"),s.textContent=n):(n.classList.add("message"),s.appendChild(n)),this._domNode.appendChild(s);const r=document.createElement("div");r.classList.add("anchor","below"),this._domNode.appendChild(r),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,d._K)(_.ID,_,4)},52394:(e,t,i)=>{var n,o=i(69332),s=i(85398),r=i(56082),a=i(70959),l=i(48077),d=i(55880),c=i(33162),u=i(54644),h=i(44950),g=i(36691),p=i(25206),m=i(82693),f=i(37174),v=i(16458),_=i(79781),C=i(21881),b=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,n){t(i,n,e)}};function w(e,t){const i=t.filter((t=>!e.find((e=>e.equals(t)))));if(i.length>=1){const e=i.map((e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`)).join(", "),t=1===i.length?p.NC("cursorAdded","Cursor added: {0}",e):p.NC("cursorsAdded","Cursors added: {0}",e);(0,o.i7)(t)}}class x extends l.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:p.NC("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:m.eH.MenubarSelectionMenu,group:"3_multi",title:p.NC({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const s=o.getCursorStates();o.setCursorStates(i.source,3,d.P.addCursorUp(o,s,n)),o.revealTopMostCursor(i.source),w(s,o.getCursorStates())}}class y extends l.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:p.NC("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:m.eH.MenubarSelectionMenu,group:"3_multi",title:p.NC({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const s=o.getCursorStates();o.setCursorStates(i.source,3,d.P.addCursorDown(o,s,n)),o.revealBottomMostCursor(i.source),w(s,o.getCursorStates())}}class L extends l.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p.NC("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:m.eH.MenubarSelectionMenu,group:"3_multi",title:p.NC({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){const e=t.getLineMaxColumn(n);i.push(new u.Y(n,e,n,e))}e.endColumn>1&&i.push(new u.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),o=t._getViewModel(),s=o.getCursorStates(),r=[];n.forEach((e=>this.getCursorsForSelection(e,i,r))),r.length>0&&t.setSelections(r),w(s,o.getCursorStates())}}class N extends l.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:p.NC("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount(),o=[];for(let a=i[0].startLineNumber;a<=n;a++)o.push(new u.Y(a,i[0].startColumn,a,i[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();o.length>0&&t.setSelections(o),w(r,s.getCursorStates())}}class I extends l.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:p.NC("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=[];for(let r=i[0].startLineNumber;r>=1;r--)n.push(new u.Y(r,i[0].startColumn,r,i[0].endColumn));const o=t._getViewModel(),s=o.getCursorStates();n.length>0&&t.setSelections(n),w(s,o.getCursorStates())}}class M{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class T{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new T(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n,o,s=!1;const r=e.getSelections();1===r.length&&r[0].isEmpty()?(s=!0,n=!0,o=!0):(n=i.wholeWord,o=i.matchCase);const a=e.getSelection();let l,d=null;if(a.isEmpty()){const t=e.getConfiguredWordAtPosition(a.getStartPosition());if(!t)return null;l=t.word,d=new u.Y(a.startLineNumber,t.startColumn,a.startLineNumber,t.endColumn)}else l=e.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new T(e,t,s,l,n,o,d)}constructor(e,t,i,n,o,s,r){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=o,this.matchCase=s,this.currentMatch=r}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1);return i?new u.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1);return i?new u.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(129):null,!1,1073741824)}}class R extends a.JT{static get(e){return e.getContribution(R.ID)}constructor(e){super(),this._sessionDispose=this._register(new a.SL),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=T.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new u.Y(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState(),n=i.matchCase,o=W(this._editor.getModel(),t,n);if(!o){const e=this._editor.getModel(),i=[];for(let n=0,o=t.length;n<o;n++)i[n]=this._expandEmptyToWord(e,t[n]);return void this._editor.setSelections(i)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const e=this._editor.getModel();t=i.searchScope?e.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(129):null,!1,1073741824):e.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(129):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const e=this._editor.getSelection();for(let i=0,n=t.length;i<n;i++){const n=t[i],o=n.range.intersectRanges(e);if(o){t[i]=t[0],t[0]=n;break}}this._setSelections(t.map((e=>new u.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}R.ID="editor.contrib.multiCursorController";class O extends l.R6{run(e,t){const i=R.get(t);if(!i)return;const n=t._getViewModel();if(n){const o=n.getCursorStates(),s=g.pR.get(t);if(s)this._run(i,s);else{const n=e.get(C.TG).createInstance(g.pR,t);this._run(i,n),n.dispose()}w(o,n.getCursorStates())}}}class P extends O{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p.NC("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:h.u.focus,primary:2082,weight:100},menuOpts:{menuId:m.eH.MenubarSelectionMenu,group:"3_multi",title:p.NC({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class D extends O{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p.NC("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:m.eH.MenubarSelectionMenu,group:"3_multi",title:p.NC({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class A extends O{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p.NC("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:h.u.focus,primary:(0,r.gx)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class E extends O{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p.NC("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class k extends O{constructor(){super({id:"editor.action.selectHighlights",label:p.NC("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:h.u.focus,primary:3114,weight:100},menuOpts:{menuId:m.eH.MenubarSelectionMenu,group:"3_multi",title:p.NC({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class F extends O{constructor(){super({id:"editor.action.changeAll",label:p.NC("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:f.Ao.and(h.u.writable,h.u.editorTextFocus),kbOpts:{kbExpr:h.u.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class V{constructor(e,t,i,n,o){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=n,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((e=>e.range)),this._cachedFindMatches.sort(c.e.compareRangesUsingStarts)),this._cachedFindMatches}}let H=n=class extends a.JT{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(107),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new s.pY((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(107)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()})));const i=g.pR.get(e);i&&this._register(i.getState().onFindReplaceStateChange((e=>{this._update()}))),this.updateSoon.schedule()}_update(){this._setState(n._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t)return null;if(!i.hasModel())return null;const n=i.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const o=R.get(i);if(!o)return null;const s=g.pR.get(i);if(!s)return null;let r=o.getSession(s);if(!r){const e=i.getSelections();if(e.length>1){const t=s.getState(),n=t.matchCase,o=W(i.getModel(),e,n);if(!o)return null}r=T.create(i,s)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;const a=s.getState(),l=a.matchCase;if(a.isRevealed){let e=a.searchString;l||(e=e.toLowerCase());let t=r.searchText;if(l||(t=t.toLowerCase()),e===t&&r.matchCase===a.matchCase&&r.wholeWord===a.wholeWord&&!a.isRegex)return null}return new V(i.getModel(),r.searchText,r.matchCase,r.wholeWord?i.getOption(129):null,e)}_setState(e){if(this.state=e,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),n=this.editor.getSelections();n.sort(c.e.compareRangesUsingStarts);const o=[];for(let a=0,l=0,d=i.length,u=n.length;a<d;){const e=i[a];if(l>=u)o.push(e),a++;else{const t=c.e.compareRangesUsingStarts(e,n[l]);t<0?(!n[l].isEmpty()&&c.e.areIntersecting(e,n[l])||o.push(e),a++):(t>0||a++,l++)}}const s=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(80),r=o.map((e=>({range:e,options:(0,_.w)(s)})));this._decorations.set(r)}dispose(){this._setState(null),super.dispose()}};function W(e,t,i){const n=U(e,t[0],!i);for(let o=1,s=t.length;o<s;o++){const s=t[o];if(s.isEmpty())return!1;const r=U(e,s,!i);if(n!==r)return!1}return!0}function U(e,t,i){const n=e.getValueInRange(t);return i?n.toLowerCase():n}H.ID="editor.contrib.selectionHighlighter",H=n=b([S(1,v.p)],H);class K extends l.R6{constructor(){super({id:"editor.action.focusNextCursor",label:p.NC("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:p.NC("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=Array.from(n.getCursorStates()),s=o.shift();s&&(o.push(s),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),w(o,n.getCursorStates()))}}class B extends l.R6{constructor(){super({id:"editor.action.focusPreviousCursor",label:p.NC("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:p.NC("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=Array.from(n.getCursorStates()),s=o.pop();s&&(o.unshift(s),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),w(o,n.getCursorStates()))}}(0,l._K)(R.ID,R,4),(0,l._K)(H.ID,H,1),(0,l.Qr)(x),(0,l.Qr)(y),(0,l.Qr)(L),(0,l.Qr)(P),(0,l.Qr)(D),(0,l.Qr)(A),(0,l.Qr)(E),(0,l.Qr)(k),(0,l.Qr)(F),(0,l.Qr)(N),(0,l.Qr)(I),(0,l.Qr)(K),(0,l.Qr)(B)}}]);