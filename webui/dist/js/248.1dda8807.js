(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[248],{69984:e=>{e.exports=function(e,o,t){const n=void 0!==e.__vccOpts?e.__vccOpts:e,a=n[o];if(void 0===a)n[o]=t;else for(const i in t)void 0===a[i]&&(a[i]=t[i])}},8326:(e,o,t)=>{"use strict";t.d(o,{Z:()=>d});t(72879);var n=t(59835),a=t(60499),i=t(65987),r=t(91384),c=t(17026),u=t(22026),l=t(95439),s=t(52046);const d=(0,i.L)({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:o,emit:t}){const i=(0,n.FN)(),d=(0,a.iH)(null);let f=0;const p=[];function v(o){const n="boolean"===typeof o?o:!0!==e.noErrorFocus,a=++f,i=(e,o)=>{t("validation"+(!0===e?"Success":"Error"),o)},r=e=>{const o=e.validate();return"function"===typeof o.then?o.then((o=>({valid:o,comp:e})),(o=>({valid:!1,comp:e,err:o}))):Promise.resolve({valid:o,comp:e})},c=!0===e.greedy?Promise.all(p.map(r)).then((e=>e.filter((e=>!0!==e.valid)))):p.reduce(((e,o)=>e.then((()=>r(o).then((e=>{if(!1===e.valid)return Promise.reject(e)}))))),Promise.resolve()).catch((e=>[e]));return c.then((e=>{if(void 0===e||0===e.length)return a===f&&i(!0),!0;if(a===f){const{comp:o,err:t}=e[0];if(void 0!==t&&console.error(t),i(!1,o),!0===n){const o=e.find((({comp:e})=>"function"===typeof e.focus&&!1===(0,s.$D)(e.$)));void 0!==o&&o.comp.focus()}}return!1}))}function m(){f++,p.forEach((e=>{"function"===typeof e.resetValidation&&e.resetValidation()}))}function h(o){void 0!==o&&(0,r.NS)(o);const n=f+1;v().then((a=>{n===f&&!0===a&&(void 0!==e.onSubmit?t("submit",o):void 0!==o&&void 0!==o.target&&"function"===typeof o.target.submit&&o.target.submit())}))}function g(o){void 0!==o&&(0,r.NS)(o),t("reset"),(0,n.Y3)((()=>{m(),!0===e.autofocus&&!0!==e.noResetFocus&&y()}))}function y(){(0,c.jd)((()=>{if(null===d.value)return;const e=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),(e=>e.tabIndex>-1));null!==e&&void 0!==e&&e.focus({preventScroll:!0})}))}(0,n.JJ)(l.vh,{bindComponent(e){p.push(e)},unbindComponent(e){const o=p.indexOf(e);o>-1&&p.splice(o,1)}});let b=!1;return(0,n.se)((()=>{b=!0})),(0,n.dl)((()=>{!0===b&&!0===e.autofocus&&y()})),(0,n.bv)((()=>{!0===e.autofocus&&y()})),Object.assign(i.proxy,{validate:v,resetValidation:m,submit:h,reset:g,focus:y,getValidationComponents:()=>p}),()=>(0,n.h)("form",{class:"q-form",ref:d,onSubmit:h,onReset:g},(0,u.KR)(o.default))}})},69885:(e,o,t)=>{"use strict";t.d(o,{Z:()=>c});var n=t(59835),a=t(65987),i=t(22026),r=t(95439);const c=(0,a.L)({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:o}){const{proxy:{$q:t}}=(0,n.FN)(),a=(0,n.f3)(r.YE,r.qO);if(a===r.qO)return console.error("QPage needs to be a deep child of QLayout"),r.qO;const c=(0,n.f3)(r.Mw,r.qO);if(c===r.qO)return console.error("QPage needs to be child of QPageContainer"),r.qO;const u=(0,n.Fl)((()=>{const o=(!0===a.header.space?a.header.size:0)+(!0===a.footer.space?a.footer.size:0);if("function"===typeof e.styleFn){const n=!0===a.isContainer.value?a.containerHeight.value:t.screen.height;return e.styleFn(o,n)}return{minHeight:!0===a.isContainer.value?a.containerHeight.value-o+"px":0===t.screen.height?0!==o?`calc(100vh - ${o}px)`:"100vh":t.screen.height-o+"px"}})),l=(0,n.Fl)((()=>"q-page"+(!0===e.padding?" q-layout-padding":"")));return()=>(0,n.h)("main",{class:l.value,style:u.value},(0,i.KR)(o.default))}})},19302:(e,o,t)=>{"use strict";t.d(o,{Z:()=>i});var n=t(59835),a=t(95439);function i(){return(0,n.f3)(a.Ng)}},67248:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>F});var n=t(59835),a=t(61957),i=t(34136),r=t(60499),c=t(28339),u=t(19302),l=function(e,o,t,n){function a(e){return e instanceof t?e:new t((function(o){o(e)}))}return new(t||(t=Promise))((function(t,i){function r(e){try{u(n.next(e))}catch(o){i(o)}}function c(e){try{u(n["throw"](e))}catch(o){i(o)}}function u(e){e.done?t(e.value):a(e.value).then(r,c)}u((n=n.apply(e,o||[])).next())}))};const s={class:"text-h5"},d=(0,n.aZ)({__name:"LoginView",setup(e){const o=(0,c.tv)(),t=(0,r.iH)(!1),d=(0,r.iH)(""),f=(0,r.iH)(""),p=(0,r.iH)(""),v=(0,u.Z)();function m(){return l(this,void 0,void 0,(function*(){try{const{data:e}=yield i.api.checkLoginStatus();t.value=e.isLoggedIn,t.value&&o.push("/index")}catch(e){console.error("Error checking login status:",e),t.value=!1}}))}function h(){d.value="",f.value=""}function g(){return l(this,void 0,void 0,(function*(){if(d.value&&f.value)try{const{data:e}=yield i.api.loginApi(d.value,f.value);e.isLoggedIn?(t.value=!0,o.push("/index")):(p.value="登录失败，请检查用户名和密码。",v.notify({color:"negative",position:"top",message:p.value,icon:"report_problem"}))}catch(e){p.value="登录失败，请检查用户名和密码。",v.notify({color:"negative",position:"top",message:p.value,icon:"report_problem"})}}))}return(0,n.bv)((()=>{m().catch((e=>{console.error("Failed to check login status:",e)}))})),(e,o)=>{const t=(0,n.up)("q-icon"),i=(0,n.up)("q-card-section"),r=(0,n.up)("q-separator"),c=(0,n.up)("q-input"),u=(0,n.up)("q-btn"),l=(0,n.up)("q-card-actions"),p=(0,n.up)("q-form"),v=(0,n.up)("q-card"),m=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(m,{class:"row justify-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{class:"col-12 col-xs-8 col-sm-6 col-md-4 shadow q-pa-md self-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.Wm)(t,{name:"login",color:"accent"}),(0,n.Uk)(" 登录 ")])])),_:1}),(0,n.Wm)(r),(0,n.Wm)(p,{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",onSubmit:(0,a.iM)(g,["prevent"]),onReset:h},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:"q-gutter-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=e=>d.value=e),filled:"",clearable:"",label:"用户名",required:""},{prepend:(0,n.w5)((()=>[(0,n.Wm)(t,{name:"person"})])),_:1},8,["modelValue"]),(0,n.Wm)(c,{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=e=>f.value=e),type:"password",filled:"",clearable:"",label:"密码",required:""},{prepend:(0,n.w5)((()=>[(0,n.Wm)(t,{name:"lock"})])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(r),(0,n.Wm)(l,{class:"justify-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{flat:"",color:"positive",type:"submit",icon:"check"},{default:(0,n.w5)((()=>[(0,n.Uk)("登录")])),_:1}),(0,n.Wm)(u,{flat:"",color:"negative",type:"reset",icon:"clear"},{default:(0,n.w5)((()=>[(0,n.Uk)("清除")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})}}});var f=t(11639),p=t(69885),v=t(44458),m=t(63190),h=t(22857),g=t(50926),y=t(8326),b=t(66611),q=t(11821),w=t(68879),_=t(69984),x=t.n(_);const S=(0,f.Z)(d,[["__scopeId","data-v-0f21ec34"]]),F=S;x()(d,"components",{QPage:p.Z,QCard:v.Z,QCardSection:m.Z,QIcon:h.Z,QSeparator:g.Z,QForm:y.Z,QInput:b.Z,QCardActions:q.Z,QBtn:w.Z})}}]);