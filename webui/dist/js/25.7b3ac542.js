"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[25],{87707:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(59835),a=t(60499),i=t(73512),l=function(e,n,t,o){function a(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function l(e){try{c(o.next(e))}catch(n){i(n)}}function u(e){try{c(o["throw"](e))}catch(n){i(n)}}function c(e){e.done?t(e.value):a(e.value).then(l,u)}c((o=o.apply(e,n||[])).next())}))};const u=(0,o.aZ)({__name:"ConfigFileEditor",props:{modelValue:{},language:{},theme:{}},emits:["update:modelValue"],setup(e,{emit:n}){const t=(0,a.iH)(),u=e,c=n;let r,s=!1;return(0,o.bv)((()=>{t.value?(r=i.editor.create(t.value,{value:u.modelValue,language:u.language,theme:u.theme,fontFamily:"Roboto Mono"}),r.onDidChangeModelContent((()=>l(this,void 0,void 0,(function*(){s=!0;const e=r.getValue();c("update:modelValue",e),yield(0,o.Y3)(),s=!1}))))):console.error("Editor DOM element is not available.")})),(0,o.YP)((()=>u.modelValue),(e=>{s||r.setValue(e)})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{ref_key:"dom",ref:t,class:"editor"},null,512))}});var c=t(11639);const r=(0,c.Z)(u,[["__scopeId","data-v-5589f457"]]),s=r},86867:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var o=t(59835),a=t(60499),i=t(19302),l=t(87707),u=t(34136),c=function(e,n,t,o){function a(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function l(e){try{c(o.next(e))}catch(n){i(n)}}function u(e){try{c(o["throw"](e))}catch(n){i(n)}}function c(e){e.done?t(e.value):a(e.value).then(l,u)}c((o=o.apply(e,n||[])).next())}))};const r=(0,o._)("div",{class:"text-h5"},"编辑配置文件",-1),s=(0,o.aZ)({__name:"AccountConfigEditorView",props:{uin:{}},setup(e){const n=(0,i.Z)(),t=e,s=(0,a.iH)(),d=(0,a.iH)(!0);function f(){return c(this,void 0,void 0,(function*(){try{d.value=!0;const{data:e}=yield u.api.accountConfigReadApiUinConfigGet(t.uin);s.value=e.content}catch(e){s.value=void 0}finally{d.value=!1}}))}function v(){return c(this,void 0,void 0,(function*(){if(s.value)try{d.value=!0;const{data:e}=yield u.api.accountConfigWriteApiUinConfigPatch(t.uin,{content:s.value});s.value=e.content,n.notify({message:"配置文件修改成功",color:"positive"})}catch(e){n.notify({message:"配置文件修改失败",color:"negative"})}finally{d.value=!1}}))}function m(){return c(this,void 0,void 0,(function*(){try{d.value=!0,yield u.api.accountConfigDeleteApiUinConfigDelete(t.uin),yield f(),n.notify({message:"配置文件删除成功",color:"positive"})}catch(e){n.notify({message:"配置文件删除失败",color:"negative"})}finally{d.value=!1}}))}return(0,o.bv)(f),(e,t)=>{const i=(0,o.up)("q-btn"),u=(0,o.up)("q-card-section"),c=(0,o.up)("q-separator"),g=(0,o.up)("q-card-actions"),p=(0,o.up)("q-inner-loading"),h=(0,o.up)("q-card"),y=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(y,{class:"row q-pa-md justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"shadow col-12",style:{height:"calc(100vh - 5rem)"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"row justify-start items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{onClick:e.$router.back,flat:"",label:"返回",color:"grey",icon:"arrow_back"},null,8,["onClick"]),r])),_:1}),(0,o.Wm)(c),(0,o.Wm)(g,{class:"q-gutter-md q-mx-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{flat:"",onClick:v,color:"primary",label:"提交修改",icon:"save"}),(0,o.Wm)(i,{flat:"",onClick:f,color:"secondary",label:"重新加载配置文件",icon:"refresh"}),(0,o.Wm)(i,{flat:"",onClick:m,color:"negative",label:"删除并重新生成配置文件",icon:"delete"})])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>["undefined"!==typeof s.value?((0,o.wg)(),(0,o.j4)(l.Z,{key:0,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),language:"yaml",style:{height:"70vh"},theme:(0,a.SU)(n).dark.isActive?"vs-dark":"vs"},null,8,["modelValue","theme"])):(0,o.kq)("",!0),(0,o.Wm)(p,{showing:d.value},null,8,["showing"])])),_:1})])),_:1})])),_:1})}}});var d=t(69885),f=t(44458),v=t(63190),m=t(68879),g=t(50926),p=t(11821),h=t(60854),y=t(69984),w=t.n(y);const C=s,k=C;w()(s,"components",{QPage:d.Z,QCard:f.Z,QCardSection:v.Z,QBtn:m.Z,QSeparator:g.Z,QCardActions:p.Z,QInnerLoading:h.Z})}}]);